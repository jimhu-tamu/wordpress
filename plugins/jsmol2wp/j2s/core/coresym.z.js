(function(ha,y,H,U,R,K,Q,p,D,ia,Y,V,S,T,ja,W,aa,ka,ba,ca,da,la,X,ea,fa,ma,na,oa,Z,pa,qa,ra,sa,$,ga,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,d,k){H("J.adapter.smarter");R(["JU.P3"],"J.adapter.smarter.XtalSymmetry","java.lang.Boolean $.Float java.util.Hashtable JU.BS $.M3 $.M4 $.P3i $.PT $.SB $.V3 J.adapter.smarter.Atom J.api.Interface JU.BSUtil $.Logger $.Vibration".split(" "),function(){c$=Q(function(){this.notionalUnitCell=this.symmetry=this.asc=null;this.symmetryRange=0;this.centroidPacked=
this.doCentroidUnitCell=!1;this.packingError=0;this.filterSymop=null;this.applySymmetryToBonds=!1;this.matSupercell=this.fmatSupercell=this.ptSupercell=this.latticeCells=null;this.doNormalize=!0;this.vibsFractional=this.doPackUnitCell=!1;this.rmaxz=this.rmaxy=this.rmaxx=this.rminz=this.rminy=this.rminx=0;this.maxXYZ0=this.minXYZ0=this.maxXYZ=this.minXYZ=this.unitCellOffset=this.ptOffset=null;this.checkAll=!1;this.bondCount0=0;this.dtype=3;this.unitCellTranslations=null;this.latticeOp=0;this.latticeOnly=
!1;this.firstSymmetryAtom=this.noSymmetryCount=0;this.mTemp=this.ptTemp=null;this.nVib=0;K(this,arguments)},J.adapter.smarter,"XtalSymmetry");W(c$,function(){this.notionalUnitCell=T(6,0);this.ptOffset=new JU.P3});D(c$,function(){});d(c$,"set",function(a){this.asc=a;this.getSymmetry();return this},"J.adapter.smarter.AtomSetCollection");d(c$,"getSymmetry",function(){return null==this.symmetry?this.symmetry=J.api.Interface.getSymmetry():this.symmetry});d(c$,"setSymmetry",function(a){return this.symmetry=
a},"J.api.SymmetryInterface");d(c$,"setSymmetryRange",function(a){this.symmetryRange=a;this.asc.setInfo("symmetryRange",Float.$valueOf(a))},"~N");d(c$,"setLatticeCells",function(a){this.latticeCells=a.latticeCells;var b=555>=this.latticeCells[0]&&555<=this.latticeCells[1]&&(0==this.latticeCells[2]||1==this.latticeCells[2]||-1==this.latticeCells[2]);this.doNormalize=0!=this.latticeCells[0]&&(!b||1==this.latticeCells[2]);this.applySymmetryToBonds=a.applySymmetryToBonds;this.doPackUnitCell=a.doPackUnitCell;
this.doCentroidUnitCell=a.doCentroidUnitCell;this.centroidPacked=a.centroidPacked;this.filterSymop=a.filterSymop;null!=a.strSupercell?this.setSuperCellFromString(a.strSupercell):this.setSupercellFromPoint(a.ptSupercell)},"J.adapter.smarter.AtomSetCollectionReader");d(c$,"setSupercellFromPoint",function(a){this.ptSupercell=a;null==a?this.matSupercell=null:(this.matSupercell=new JU.M4,this.matSupercell.m00=a.x,this.matSupercell.m11=a.y,this.matSupercell.m22=a.z,this.matSupercell.m33=1,JU.Logger.info("Using supercell \n"+
this.matSupercell))},"JU.P3");d(c$,"setSuperCellFromString",function(a){null==this.fmatSupercell&&(this.fmatSupercell=T(16,0),null==this.symmetry.getMatrixFromString(a,this.fmatSupercell,!0,0)?this.matSupercell=this.fmatSupercell=null:(this.matSupercell=JU.M4.newA16(this.fmatSupercell),JU.Logger.info("Using supercell \n"+this.matSupercell)))},"~S");d(c$,"setNotionalUnitCell",function(a,b,c){this.notionalUnitCell=T(a.length,0);this.unitCellOffset=c;for(var e=0;e<a.length;e++)this.notionalUnitCell[e]=
a[e];this.asc.haveUnitCell=!0;this.asc.setAtomSetAuxiliaryInfo("notionalUnitcell",this.notionalUnitCell);this.asc.setGlobalBoolean(2);this.getSymmetry().setUnitCell(this.notionalUnitCell,!1);null!=c&&(this.symmetry.setOffsetPt(c),this.asc.setAtomSetAuxiliaryInfo("unitCellOffset",c));null!=b&&(this.symmetry.initializeOrientation(b),this.asc.setAtomSetAuxiliaryInfo("matUnitCellOrientation",b))},"~A,JU.M3,JU.P3");d(c$,"addSpaceGroupOperation",function(a,b){null!=a&&this.setLatticeCells(a);this.symmetry.setSpaceGroup(this.doNormalize);
return this.symmetry.addSpaceGroupOperation(b,0)},"J.adapter.smarter.AtomSetCollectionReader,~S");d(c$,"setLatticeParameter",function(a){this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.setLattice(a)},"~N");d(c$,"applySymmetryFromReader",function(a,b){this.asc.setCoordinatesAreFractional(a.iHaveFractionalCoordinates);this.setNotionalUnitCell(a.notionalUnitCell,a.matUnitCellOrientation,a.unitCellOffset);this.asc.setAtomSetSpaceGroupName(a.sgName);this.setSymmetryRange(a.symmetryRange);if(a.doConvertToFractional||
a.fileCoordinatesAreFractional){this.setLatticeCells(a);var c=!0;if(a.ignoreFileSpaceGroupName||!a.iHaveSymmetryOperators){if(!a.merging||null==b)b=a.getNewSymmetry();c=b.createSpaceGroup(a.desiredSpaceGroupIndex,0<=a.sgName.indexOf("!")?"P1":a.sgName,a.notionalUnitCell)}else a.doPreSymmetry(),this.vibsFractional=a.vibsFractional,b=null;c&&(null!=b&&this.symmetry.setSpaceGroupFrom(b),this.packingError=a.packingError,this.applySymmetryLattice(a.ms,a.altCell),null!=b&&null==this.filterSymop&&this.asc.setAtomSetSpaceGroupName(b.getSpaceGroupName()))}a.iHaveFractionalCoordinates&&
(a.merging&&null!=b)&&(this.asc.toCartesian(b),this.asc.setCoordinatesAreFractional(!1),a.addVibrations=!1);return this.symmetry},"J.adapter.smarter.AtomSetCollectionReader,J.api.SymmetryInterface");d(c$,"applySymmetryLattice",function(a,b){if(this.asc.coordinatesAreFractional&&null!=this.symmetry.getSpaceGroup()){var c=this.latticeCells[0],e=this.latticeCells[1],g=Math.abs(this.latticeCells[2]);this.firstSymmetryAtom=this.asc.getLastAtomSetAtomIndex();var h=null;this.rminx=this.rminy=this.rminz=
this.rmaxx=this.rmaxy=this.rmaxz=0;var f=null,d=null,l=null;this.nVib=0;var j,m,n;if(null!=b&&0<=b.indexOf(",")){if(f=this.symmetry.getV0abc(b),null!=f){var s=new JU.P3,l=new JU.P3;l.setT(f[0]);this.symmetry.toFractional(l,!0);this.setSymmetryMinMax(s);for(j=0;3>j;j++)for(var q=j+1;4>q;q++)s.add2(f[j],f[q]),0!=j&&s.add(f[0]),this.symmetry.toFractional(s,!1),this.setSymmetryMinMax(s);this.symmetry.toCartesian(s,!1);s.add(f[1]);this.symmetry.toFractional(s,!1);this.setSymmetryMinMax(s);this.minXYZ=
JU.P3i.new3(y(Math.floor(this.rminx)),y(Math.floor(this.rminy)),y(Math.floor(this.rminz)));this.maxXYZ=JU.P3i.new3(y(Math.ceil(this.rmaxx)),y(Math.ceil(this.rmaxy)),y(Math.ceil(this.rmaxz)))}}else if(null!=this.fmatSupercell){s=new JU.P3;for(j=0;1>=j;j++)for(q=0;1>=q;q++)for(d=0;1>=d;d++)s.set(j,q,d),this.setSym(s);d=this.asc.getAtomSetAuxiliaryInfoValue(-1,"unitCellOffset");this.minXYZ=JU.P3i.new3(p(this.rminx),p(this.rminy),p(this.rminz));this.maxXYZ=JU.P3i.new3(p(this.rmaxx),p(this.rmaxy),p(this.rmaxz))}if(null!=
this.fmatSupercell||null!=f){JU.Logger.info("setting min/max for original lattice to "+this.minXYZ+" and "+this.maxXYZ);j=this.doPackUnitCell;this.doPackUnitCell=!1;null==this.asc.bsAtoms&&(this.asc.bsAtoms=JU.BSUtil.setAll(this.asc.ac));h=this.asc.bsAtoms;this.applyAllSymmetry(a,null,!1);this.doPackUnitCell=j;this.setVibVectors();var s=this.asc.atoms,q=this.asc.ac,r=this.asc.getLastAtomSetAtomIndex();for(j=r;j<q;j++)this.symmetry.toCartesian(s[j],!0);null==f?(j=this.setSym(JU.P3.new3(1,0,0)),m=this.setSym(JU.P3.new3(0,
1,0)),n=this.setSym(JU.P3.new3(0,0,1))):(j=f[1],m=f[2],n=f[3]);this.symmetry=null;this.symmetry=this.getSymmetry();this.setNotionalUnitCell([0,0,0,0,0,0,j.x,j.y,j.z,m.x,m.y,m.z,n.x,n.y,n.z],null,d);this.asc.setAtomSetSpaceGroupName(null==f?"P1":"cell="+b);this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.addSpaceGroupOperation("x,y,z",0);for(j=r;j<q;j++)this.symmetry.toFractional(s[j],!0),null!=l&&s[j].sub(l);this.asc.haveAnisou=!1;this.asc.setAtomSetAuxiliaryInfo("matUnitCellOrientation",
null)}this.minXYZ=new JU.P3i;this.maxXYZ=JU.P3i.new3(c,e,g);this.applyAllSymmetry(a,h,null!=this.fmatSupercell||null!=f);this.fmatSupercell=null}},"J.adapter.smarter.MSInterface,~S");d(c$,"setSym",function(a){this.matSupercell.rotate(a);this.setSymmetryMinMax(a);this.symmetry.toCartesian(a,!1);return a},"JU.P3");d(c$,"setSymmetryMinMax",function(a){this.rminx>a.x&&(this.rminx=a.x);this.rminy>a.y&&(this.rminy=a.y);this.rminz>a.z&&(this.rminz=a.z);this.rmaxx<a.x&&(this.rmaxx=a.x);this.rmaxy<a.y&&(this.rmaxy=
a.y);this.rmaxz<a.z&&(this.rmaxz=a.z)},"JU.P3");d(c$,"isInSymmetryRange",function(a){return a.x>=this.rminx&&a.y>=this.rminy&&a.z>=this.rminz&&a.x<=this.rmaxx&&a.y<=this.rmaxy&&a.z<=this.rmaxz},"JU.P3");d(c$,"isWithinCell",function(a,b,c,e,g,h,f,d,l){return b.x>c-l&&b.x<e+l&&(2>a||b.y>g-l&&b.y<h+l)&&(3>a||b.z>f-l&&b.z<d+l)},"~N,JU.P3,~N,~N,~N,~N,~N,~N,~N");d(c$,"applyAllSymmetry",function(a,b,c){if(0!=this.asc.ac){this.noSymmetryCount=0==this.asc.baseSymmetryAtomCount?this.asc.getLastAtomSetAtomCount():
this.asc.baseSymmetryAtomCount;this.asc.setTensors();this.bondCount0=this.asc.bondCount;this.finalizeSymmetry(this.symmetry);var e=this.symmetry.getSpaceGroupOperationCount();this.dtype=p(this.symmetry.getUnitCellInfoType(6));this.symmetry.setMinMaxLatticeParameters(this.minXYZ,this.maxXYZ);this.doCentroidUnitCell&&this.asc.setInfo("centroidMinMax",[this.minXYZ.x,this.minXYZ.y,this.minXYZ.z,this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z,this.centroidPacked?1:0]);if(null!=this.ptSupercell)switch(this.asc.setAtomSetAuxiliaryInfo("supercell",
this.ptSupercell),this.dtype){case 3:this.minXYZ.z*=p(Math.abs(this.ptSupercell.z)),this.maxXYZ.z*=p(Math.abs(this.ptSupercell.z));case 2:this.minXYZ.y*=p(Math.abs(this.ptSupercell.y)),this.maxXYZ.y*=p(Math.abs(this.ptSupercell.y));case 1:this.minXYZ.x*=p(Math.abs(this.ptSupercell.x)),this.maxXYZ.x*=p(Math.abs(this.ptSupercell.x))}if(this.doCentroidUnitCell||this.doPackUnitCell||0!=this.symmetryRange&&1==this.maxXYZ.x-this.minXYZ.x&&1==this.maxXYZ.y-this.minXYZ.y&&1==this.maxXYZ.z-this.minXYZ.z)switch(this.minXYZ0=
JU.P3.new3(this.minXYZ.x,this.minXYZ.y,this.minXYZ.z),this.maxXYZ0=JU.P3.new3(this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z),null!=a&&(a.setMinMax0(this.minXYZ0,this.maxXYZ0),this.minXYZ.set(p(this.minXYZ0.x),p(this.minXYZ0.y),p(this.minXYZ0.z)),this.maxXYZ.set(p(this.maxXYZ0.x),p(this.maxXYZ0.y),p(this.maxXYZ0.z))),this.dtype){case 3:this.minXYZ.z--,this.maxXYZ.z++;case 2:this.minXYZ.y--,this.maxXYZ.y++;case 1:this.minXYZ.x--,this.maxXYZ.x++}for(var g=(this.maxXYZ.x-this.minXYZ.x)*(this.maxXYZ.y-this.minXYZ.y)*
(this.maxXYZ.z-this.minXYZ.z),h=this.asc.checkSpecial?this.noSymmetryCount*e*g:0<this.symmetryRange?this.noSymmetryCount*e:1,f=Array(h),d=0;d<this.noSymmetryCount;d++)this.asc.atoms[d+this.firstSymmetryAtom].bsSymmetry=JU.BS.newN(e*(g+1));var d=0,l=V(g,0);this.unitCellTranslations=Array(g);var j=g=0,m=Math.abs(this.symmetryRange),n=0!=this.symmetryRange,s=0>this.symmetryRange,q=0<this.symmetryRange;n&&(this.rminx=this.rminy=this.rminz=this.rmaxx=this.rmaxy=this.rmaxz=0);var r=this.symmetry,w=r;this.latticeOp=
r.getLatticeOp();this.checkAll=c||1==this.asc.atomSetCount&&this.asc.checkSpecial&&0<=this.latticeOp;this.latticeOnly=this.asc.checkLatticeOnly&&0<=this.latticeOp;c&&(this.latticeOnly=!0,this.latticeOp=-1);var k=r.getSpaceGroupOperation(0);this.doPackUnitCell&&this.ptOffset.set(0,0,0);for(var G=this.minXYZ.x;G<this.maxXYZ.x;G++)for(var v=this.minXYZ.y;v<this.maxXYZ.y;v++)for(var I=this.minXYZ.z;I<this.maxXYZ.z;I++)if(this.unitCellTranslations[g]=JU.V3.new3(G,v,I),l[g++]=555+100*G+10*v+I,!(0!=G||0!=
v||0!=I||0==f.length)){for(d=0;d<this.noSymmetryCount;d++){j=this.asc.atoms[this.firstSymmetryAtom+d];null!=a&&(r=a.getAtomSymmetry(j,this.symmetry),r!==w&&(0==r.getSpaceGroupOperationCount()&&this.finalizeSymmetry(w=r),k=r.getSpaceGroupOperation(0)));var C=JU.P3.newP(j);k.rotTrans(C);r.toCartesian(C,!1);if(this.doPackUnitCell)if(r.toUnitCell(C,this.ptOffset),r.toFractional(C,!1),null==b)j.setT(C);else if(1E-4>j.distance(C))b.set(j.index);else{b.clear(j.index);continue}null!=b&&j.bsSymmetry.clearAll();
j.bsSymmetry.set(g*e);j.bsSymmetry.set(0);n&&this.setSymmetryMinMax(C);d<h&&(f[d]=C)}s&&(this.rminx-=m,this.rminy-=m,this.rminz-=m,this.rmaxx+=m,this.rmaxy+=m,this.rmaxz+=m);j=d=this.symmetryAddAtoms(0,0,0,0,d,g*e,f,a,!1)}q&&(this.rminx-=m,this.rminy-=m,this.rminz-=m,this.rmaxx+=m,this.rmaxy+=m,this.rmaxz+=m);g=0;for(G=this.minXYZ.x;G<this.maxXYZ.x;G++)for(v=this.minXYZ.y;v<this.maxXYZ.y;v++)for(I=this.minXYZ.z;I<this.maxXYZ.z;I++)if(g++,0!=G||0!=v||0!=I)d=this.symmetryAddAtoms(G,v,I,j,d,g*e,f,a,
c);g*this.noSymmetryCount==this.asc.ac-this.firstSymmetryAtom&&this.appendAtomProperties(g);this.setSymmetryOps();this.asc.setAtomSetAuxiliaryInfo("presymmetryAtomIndex",Integer.$valueOf(this.firstSymmetryAtom));this.asc.setAtomSetAuxiliaryInfo("presymmetryAtomCount",Integer.$valueOf(this.noSymmetryCount));this.asc.setAtomSetAuxiliaryInfo("latticeDesignation",r.getLatticeDesignation());this.asc.setAtomSetAuxiliaryInfo("unitCellRange",l);this.asc.setAtomSetAuxiliaryInfo("unitCellTranslations",this.unitCellTranslations);
this.notionalUnitCell=T(6,0);this.reset()}},"J.adapter.smarter.MSInterface,JU.BS,~B");d(c$,"symmetryAddAtoms",function(a,b,c,e,g,h,f,d,l){var j=0==e,m=this.bondCount0>this.asc.bondIndex0&&this.applySymmetryToBonds,n=m?V(this.noSymmetryCount,0):null;this.doPackUnitCell&&this.ptOffset.set(a,b,c);var s=this.symmetryRange*this.symmetryRange,q=0>this.symmetryRange,r=0<this.symmetryRange,w=j&&r,r=(new Boolean(r&!j)).valueOf(),k=this.symmetry.getSpaceGroupOperationCount(),p=1==k&&!this.doPackUnitCell?!1:
this.asc.checkSpecial,v=q||r,I=p||v,C=p||w,z=this.symmetry;q&&(e=this.noSymmetryCount);for(var q=this.firstSymmetryAtom+this.noSymmetryCount,x=new JU.P3,y=null,D="\x00",E=0;E<k;E++)if(!(j&&0==E||this.latticeOnly&&0<E&&E!=this.latticeOp)){for(var O=l?0:p?g:r?e:0,L=0==this.asc.vibScale?z.getSpinOp(E):this.asc.vibScale,P=this.firstSymmetryAtom;P<q;P++){var F=this.asc.atoms[P];if(!F.ignoreSymmetry&&(null==this.asc.bsAtoms||this.asc.bsAtoms.get(P))){null==d?z.newSpaceGroupPoint(E,F,x,a,b,c):(z=d.getAtomSymmetry(F,
this.symmetry),z.newSpaceGroupPoint(E,F,x,a,b,c),y=z.getSpaceGroupOperationCode(E),null!=y&&(D=y.charAt(0),z=d.getSymmetryFromCode(y),0==z.getSpaceGroupOperationCount()&&this.finalizeSymmetry(z)));var N=JU.P3.newP(x);z.toCartesian(N,!1);if(this.doPackUnitCell&&(z.toUnitCell(N,this.ptOffset),x.setT(N),z.toFractional(x,!1),!this.isWithinCell(this.dtype,x,this.minXYZ0.x,this.maxXYZ0.x,this.minXYZ0.y,this.maxXYZ0.y,this.minXYZ0.z,this.maxXYZ0.z,this.packingError)))continue;w&&this.setSymmetryMinMax(N);
var B=null;if(I){var A=3.4028235E38;if(v&&!this.isInSymmetryRange(N))continue;for(var t=F.atomName,M=null==y?F.altLoc:D,u=this.checkAll?this.asc.ac:O;0<=--u;){var H=f[u];if(null!=H){H=N.distanceSquared(H);if(p&&1E-4>H){B=this.asc.atoms[this.firstSymmetryAtom+u];if((null==B.atomName||B.atomName.equals(t))&&B.altLoc==M)break;B=null}r&&(u<e&&H<A)&&(A=H)}}if(r&&A>s)continue}u=F.atomSite;if(null!=B)m&&(n[u]=B.index),B.bsSymmetry.set(h+E),B.bsSymmetry.set(E);else if(m&&(n[u]=this.asc.ac),B=this.asc.newCloneAtom(F),
null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(B.index),B.setT(x),0!=L&&null!=B.vib&&(z.getSpaceGroupOperation(E).rotate(B.vib),B.vib.scale(L)),B.atomSite=u,null!=y&&(B.altLoc=D),B.bsSymmetry=JU.BSUtil.newAndSetBit(h+E),B.bsSymmetry.set(E),C&&(f[g++]=N),F=F.tensors,null!=F){B.tensors=null;for(u=F.size();0<=--u;)N=F.get(u),null!=N&&(1==k?B.addTensor(N.copyTensor(),null,!1):this.addRotatedTensor(B,N,E,!1,z))}}}if(m){O=this.asc.bonds;L=this.asc.atoms;for(P=this.asc.bondIndex0;P<this.bondCount0;P++)u=O[P],
B=L[u.atomIndex1],F=L[u.atomIndex2],null==B||null==F||(B=n[B.atomSite],F=n[F.atomSite],(B>=q||F>=q)&&this.asc.addNewBondWithOrder(B,F,u.order))}}return g},"~N,~N,~N,~N,~N,~N,~A,J.adapter.smarter.MSInterface,~B");d(c$,"appendAtomProperties",function(a){var b=this.asc.getAtomSetAuxiliaryInfoValue(-1,"atomProperties");if(null!=b)for(var c,e=b.entrySet().iterator();e.hasNext()&&((c=e.next())||1);){for(var g=c.getKey(),h=c.getValue(),f=new JU.SB,d=a;0<=--d;)f.append(h);b.put(g,f.toString())}},"~N");d(c$,
"finalizeSymmetry",function(a){var b=this.asc.getAtomSetAuxiliaryInfoValue(-1,"spaceGroup");a.setFinalOperations(b,this.asc.atoms,this.firstSymmetryAtom,this.noSymmetryCount,this.doNormalize,this.filterSymop);(null!=this.filterSymop||null==b||b.equals("unspecified!"))&&this.asc.setAtomSetSpaceGroupName(a.getSpaceGroupName())},"J.api.SymmetryInterface");d(c$,"setSymmetryOps",function(){var a=this.symmetry.getSpaceGroupOperationCount();if(0<a){for(var b=Array(a),c=0;c<a;c++)b[c]=""+this.symmetry.getSpaceGroupXyz(c,
this.doNormalize);this.asc.setAtomSetAuxiliaryInfo("symmetryOperations",b);this.asc.setAtomSetAuxiliaryInfo("symmetryOps",this.symmetry.getSymmetryOperations())}this.asc.setAtomSetAuxiliaryInfo("symmetryCount",Integer.$valueOf(a))});d(c$,"applySymmetryBio",function(a,b,c,e){if(null!=this.latticeCells&&0!=this.latticeCells[0])JU.Logger.error("Cannot apply biomolecule when lattice cells are indicated");else{var g=0<=e.indexOf("BYCHAIN")?1:0<=e.indexOf("BYSYMOP")?2:0;this.doNormalize=!1;var h=a.get("biomts");
if(!(2>h.size())){this.symmetry=null;Float.isNaN(b[0])||this.setNotionalUnitCell(b,null,this.unitCellOffset);this.getSymmetry().setSpaceGroup(this.doNormalize);this.addSpaceGroupOperation(null,"x,y,z");a=a.get("name");this.asc.setAtomSetSpaceGroupName(a);a=h.size();this.applySymmetryToBonds=c;this.bondCount0=this.asc.bondCount;b=(c=this.bondCount0>this.asc.bondIndex0&&c)?V(this.asc.ac,0):null;this.firstSymmetryAtom=this.asc.getLastAtomSetAtomIndex();var f=this.asc.ac,d=new java.util.Hashtable,l=0,
j=this.asc.atoms;switch(g){case 1:for(g=f;--g>=this.firstSymmetryAtom;){var m=Integer.$valueOf(j[g].chainID),n=d.get(m);null==n&&(l++,d.put(m,n=new JU.BS));n.set(g)}this.asc.bsAtoms=new JU.BS;for(g=0;g<l;g++)this.asc.bsAtoms.set(f+g),m=new J.adapter.smarter.Atom,m.set(0,0,0),m.radius=16,this.asc.addAtom(m);for(var s=0,q,d=d.entrySet().iterator();d.hasNext()&&((q=d.next())||1);){m=j[f+s++];n=q.getValue();for(g=n.nextSetBit(0);0<=g;g=n.nextSetBit(g+1))m.add(j[g]);m.scale(1/n.cardinality());m.atomName=
"Pt"+s;m.chainID=q.getKey().intValue()}this.firstSymmetryAtom=f;f+=l;break;case 2:this.asc.bsAtoms=new JU.BS;this.asc.bsAtoms.set(f);m=j[f]=new J.adapter.smarter.Atom;m.set(0,0,0);for(g=f;--g>=this.firstSymmetryAtom;)m.add(j[g]);m.scale(1/(f-this.firstSymmetryAtom));m.atomName="Pt";m.radius=16;this.firstSymmetryAtom=f++}0<=e.indexOf("#<")&&(a=Math.min(a,JU.PT.parseInt(e.substring(e.indexOf("#<")+2))-1),e=JU.PT.rep(e,"#<","_<"));for(q=this.firstSymmetryAtom;q<f;q++)j[q].bsSymmetry=JU.BSUtil.newAndSetBit(0);
for(g=1;g<a;g++){if(0<=e.indexOf("!#")){if(0<=e.indexOf("!#"+(g+1)+";"))continue}else if(0<=e.indexOf("#")&&0>e.indexOf("#"+(g+1)+";"))continue;l=h.get(g);for(q=this.firstSymmetryAtom;q<f;q++)if(null==this.asc.bsAtoms||this.asc.bsAtoms.get(q))try{var r=j[q].atomSite,k;c&&(b[r]=this.asc.ac);k=this.asc.newCloneAtom(j[q]);null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(k.index);k.atomSite=r;l.rotTrans(k);k.bsSymmetry=JU.BSUtil.newAndSetBit(g);if(c)for(var p=this.asc.bondIndex0;p<this.bondCount0;p++){var G=
this.asc.bonds[p],v=b[j[G.atomIndex1].atomSite],y=b[j[G.atomIndex2].atomSite];(v>=f||y>=f)&&this.asc.addNewBondWithOrder(v,y,G.order)}}catch(C){if(Y(C,Exception))this.asc.errorMessage="appendAtomCollection error: "+C;else throw C;}0<g&&this.symmetry.addBioMoleculeOperation(l,!1)}this.noSymmetryCount=f-this.firstSymmetryAtom;this.asc.setAtomSetAuxiliaryInfo("presymmetryAtomIndex",Integer.$valueOf(this.firstSymmetryAtom));this.asc.setAtomSetAuxiliaryInfo("presymmetryAtomCount",Integer.$valueOf(this.noSymmetryCount));
this.asc.setAtomSetAuxiliaryInfo("biosymmetryCount",Integer.$valueOf(a));this.asc.setAtomSetAuxiliaryInfo("biosymmetry",this.symmetry);this.finalizeSymmetry(this.symmetry);this.setSymmetryOps();this.reset()}}},"java.util.Map,~A,~B,~S");d(c$,"reset",function(){this.asc.coordinatesAreFractional=!1;this.asc.setAtomSetAuxiliaryInfo("hasSymmetry",Boolean.TRUE);this.asc.setGlobalBoolean(1)});d(c$,"addRotatedTensor",function(a,b,c,e,g){null==this.ptTemp&&(this.ptTemp=new JU.P3,this.mTemp=new JU.M3);return a.addTensor(J.api.Interface.getUtil("Tensor").setFromEigenVectors(g.rotateAxes(c,
b.eigenVectors,this.ptTemp,this.mTemp),b.eigenValues,b.isIsotropic?"iso":b.type,b.id,b),null,e)},"J.adapter.smarter.Atom,JU.Tensor,~N,~B,J.api.SymmetryInterface");d(c$,"setTensors",function(){for(var a=this.asc.ac,b=this.asc.getLastAtomSetAtomIndex();b<a;b++){var c=this.asc.atoms[b];null!=c.anisoBorU&&(c.addTensor(this.symmetry.getTensor(c.anisoBorU),null,!1),Float.isNaN(c.bfactor)&&(c.bfactor=100*c.anisoBorU[7]),c.anisoBorU=null)}});d(c$,"setTimeReversal",function(a,b){this.symmetry.setTimeReversal(a,
b)},"~N,~N");d(c$,"rotateToSuperCell",function(a){null!=this.matSupercell&&this.matSupercell.rotate(a)},"JU.V3");d(c$,"setVibVectors",function(){if(0<this.nVib||0>this.asc.iSet||!this.vibsFractional)return this.nVib;for(var a=this.asc.getAtomSetAtomIndex(this.asc.iSet),b=this.asc.ac;--b>=a;)if(null!=this.asc.atoms[b].vib){var c=new JU.Vibration;c.setT(this.asc.atoms[b].vib);c.modDim=-2;this.symmetry.toCartesian(c,!0);this.asc.atoms[b].vib=c;this.nVib++}return this.nVib});S(c$,"PARTICLE_NONE",0,"PARTICLE_CHAIN",
1,"PARTICLE_SYMOP",2)});H("J.api");ba(J.api,"SymmetryInterface");H("JS");R(["J.api.SymmetryInterface"],"JS.Symmetry","java.lang.Float java.util.Hashtable JU.BS $.Lst $.M3 $.M4 $.P3 $.SB $.V3 JM.Atom JS.PointGroup $.SpaceGroup $.SymmetryInfo $.SymmetryOperation $.UnitCell JU.Escape $.Logger $.SimpleUnitCell".split(" "),function(){c$=Q(function(){this.unitCell=this.symmetryInfo=this.spaceGroup=this.pointGroup=null;this.$isBio=!1;K(this,arguments)},JS,"Symmetry",null,J.api.SymmetryInterface);d(c$,"isBio",
function(){return this.$isBio});D(c$,function(){});k(c$,"setPointGroup",function(a,b,c,e,g,h){this.pointGroup=JS.PointGroup.getPointGroup(null==a?null:a.pointGroup,b,c,e,g,h);return this},"J.api.SymmetryInterface,~A,JU.BS,~B,~N,~N");k(c$,"getPointGroupName",function(){return this.pointGroup.getName()});k(c$,"getPointGroupInfo",function(a,b,c,e,g,h){return!b&&!c&&null!=this.pointGroup.textInfo?this.pointGroup.textInfo:b&&this.pointGroup.isDrawType(e,g,h)?this.pointGroup.drawInfo:c&&null!=this.pointGroup.info?
this.pointGroup.info:this.pointGroup.getInfo(a,b,c,e,g,h)},"~N,~B,~B,~S,~N,~N");d(c$,"setSpaceGroup",function(a){null==this.spaceGroup&&(this.spaceGroup=JS.SpaceGroup.getNull(!0).set(a))},"~B");d(c$,"addSpaceGroupOperation",function(a,b){return this.spaceGroup.addSymmetry(a,b,!1)},"~S,~N");d(c$,"addBioMoleculeOperation",function(a,b){this.$isBio=this.spaceGroup.isBio=!0;return this.spaceGroup.addSymmetry((b?"!":"")+"[[bio"+a,0,!1)},"JU.M4,~B");k(c$,"setLattice",function(a){this.spaceGroup.setLatticeParam(a)},
"~N");d(c$,"getSpaceGroup",function(){return this.spaceGroup});k(c$,"setSpaceGroupFrom",function(a){this.spaceGroup=a.getSpaceGroup()},"J.api.SymmetryInterface");k(c$,"createSpaceGroup",function(a,b,c){this.spaceGroup=JS.SpaceGroup.createSpaceGroup(a,b,c);null!=this.spaceGroup&&JU.Logger.debugging&&JU.Logger.debug("using generated space group "+this.spaceGroup.dumpInfo(null));return null!=this.spaceGroup},"~N,~S,~O");k(c$,"getSpaceGroupInfoStr",function(a,b){return JS.SpaceGroup.getInfo(a,b)},"~S,J.api.SymmetryInterface");
k(c$,"getLatticeDesignation",function(){return this.spaceGroup.getLatticeDesignation()});k(c$,"setFinalOperations",function(a,b,c,e,g,h){if(null!=a&&(a.startsWith("bio")||0<=a.indexOf(" *(")))this.spaceGroup.name=a;if(null!=h){var f=new JU.Lst;f.addLast(this.spaceGroup.operations[0]);for(var d=1;d<this.spaceGroup.operationCount;d++)h.contains(" "+(d+1)+" ")&&f.addLast(this.spaceGroup.operations[d]);this.spaceGroup=JS.SpaceGroup.createSpaceGroup(-1,a+" *("+h.trim()+")",f)}this.spaceGroup.setFinalOperations(b,
c,e,g)},"~S,~A,~N,~N,~B,~S");d(c$,"getSpaceGroupOperation",function(a){return a>=this.spaceGroup.operations.length?null:null==this.spaceGroup.finalOperations?this.spaceGroup.operations[a]:this.spaceGroup.finalOperations[a]},"~N");k(c$,"getSpaceGroupXyz",function(a,b){return this.spaceGroup.getXyz(a,b)},"~N,~B");d(c$,"newSpaceGroupPoint",function(a,b,c,e,g,h){null==this.spaceGroup.finalOperations?(this.spaceGroup.operations[a].isFinalized||this.spaceGroup.operations[a].doFinalize(),this.spaceGroup.operations[a].newPoint(b,
c,e,g,h)):this.spaceGroup.finalOperations[a].newPoint(b,c,e,g,h)},"~N,JU.P3,JU.P3,~N,~N,~N");k(c$,"rotateAxes",function(a,b,c,e){return 0==a?b:this.spaceGroup.finalOperations[a].rotateAxes(b,this.unitCell,c,e)},"~N,~A,JU.P3,JU.M3");k(c$,"getSpaceGroupOperationCode",function(a){return this.spaceGroup.operations[a].subsystemCode},"~N");k(c$,"setTimeReversal",function(a,b){this.spaceGroup.operations[a].setTimeReversal(b)},"~N,~N");k(c$,"getSpinOp",function(a){return this.spaceGroup.operations[a].getSpinOp()},
"~N");k(c$,"addLatticeVectors",function(a){return this.spaceGroup.addLatticeVectors(a)},"JU.Lst");k(c$,"getLatticeOp",function(){return this.spaceGroup.latticeOp});k(c$,"getOperationRsVs",function(a){return(null==this.spaceGroup.finalOperations?this.spaceGroup.operations:this.spaceGroup.finalOperations)[a].rsvs},"~N");k(c$,"getSiteMultiplicity",function(a){return this.spaceGroup.getSiteMultiplicity(a,this.unitCell)},"JU.P3");k(c$,"addOp",function(a,b,c,e){this.spaceGroup.isSSG=!0;b=JS.SymmetryOperation.getXYZFromRsVs(b,
c,!1);c=this.spaceGroup.addSymmetry(b,-1,!0);this.spaceGroup.operations[c].setSigma(a,e);return b},"~S,JU.Matrix,JU.Matrix,JU.Matrix");k(c$,"getMatrixFromString",function(a,b,c){return JS.SymmetryOperation.getMatrixFromString(null,a,b,c)},"~S,~A,~B,~N");d(c$,"getSpaceGroupName",function(){return null!=this.symmetryInfo?this.symmetryInfo.sgName:null!=this.spaceGroup?this.spaceGroup.getName():""});k(c$,"getSpaceGroupOperationCount",function(){return null!=this.symmetryInfo?this.symmetryInfo.symmetryOperations.length:
null!=this.spaceGroup&&null!=this.spaceGroup.finalOperations?this.spaceGroup.finalOperations.length:0});k(c$,"getCoordinatesAreFractional",function(){return null==this.symmetryInfo||this.symmetryInfo.coordinatesAreFractional});k(c$,"getCellRange",function(){return this.symmetryInfo.cellRange});k(c$,"getSymmetryInfoStr",function(){return this.symmetryInfo.infoStr});d(c$,"getSymmetryOperations",function(){return null==this.symmetryInfo?this.spaceGroup.finalOperations:this.symmetryInfo.symmetryOperations});
k(c$,"isPeriodic",function(){return null==this.symmetryInfo?!1:this.symmetryInfo.isPeriodic()});k(c$,"setSymmetryInfo",function(a,b){this.symmetryInfo=new JS.SymmetryInfo;var c=this.symmetryInfo.setSymmetryInfo(b);null!=c&&(this.setUnitCell(c,b.containsKey("jmolData")),this.unitCell.moreInfo=b.get("moreUnitCellInfo"),b.put("infoUnitCell",this.getUnitCellAsArray(!1)),this.setOffsetPt(b.get("unitCellOffset")),c=b.get("matUnitCellOrientation"),null!=c&&this.initializeOrientation(c),JU.Logger.debugging&&
JU.Logger.debug("symmetryInfos["+a+"]:\n"+this.unitCell.dumpInfo(!0)))},"~N,java.util.Map");k(c$,"haveUnitCell",function(){return null!=this.unitCell});k(c$,"checkUnitCell",function(a,b,c,e){a.toFractional(c,e);return c.x>=b.x-1-0.02&&c.x<=b.x+0.02&&c.y>=b.y-1-0.02&&c.y<=b.y+0.02&&c.z>=b.z-1-0.02&&c.z<=b.z+0.02},"J.api.SymmetryInterface,JU.P3,JU.P3,~B");d(c$,"setUnitCell",function(a,b){this.unitCell=JS.UnitCell.newA(a,b)},"~A,~B");k(c$,"unitCellEquals",function(a){return a.unitCell.isSameAs(this.unitCell)},
"J.api.SymmetryInterface");k(c$,"getUnitCellState",function(){return null==this.unitCell?"":this.unitCell.getState()});k(c$,"getMoreInfo",function(){return this.unitCell.moreInfo});d(c$,"getUnitsymmetryInfo",function(){return this.unitCell.dumpInfo(!1)});k(c$,"initializeOrientation",function(a){this.unitCell.initOrientation(a)},"JU.M3");k(c$,"unitize",function(a){this.unitCell.unitize(a)},"JU.P3");k(c$,"toUnitCell",function(a,b){this.unitCell.toUnitCell(a,b)},"JU.P3,JU.P3");d(c$,"toCartesian",function(a,
b){this.$isBio||this.unitCell.toCartesian(a,b)},"JU.T3,~B");k(c$,"toSupercell",function(a){return this.unitCell.toSupercell(a)},"JU.P3");d(c$,"toFractional",function(a,b){this.$isBio||this.unitCell.toFractional(a,b)},"JU.T3,~B");d(c$,"getNotionalUnitCell",function(){return this.unitCell.getNotionalUnitCell()});k(c$,"getUnitCellAsArray",function(a){return this.unitCell.getUnitCellAsArray(a)},"~B");k(c$,"getTensor",function(a){if(null==a)return null;null==this.unitCell&&(this.unitCell=JS.UnitCell.newA([1,
1,1,90,90,90],!0));return this.unitCell.getTensor(a)},"~A");k(c$,"getUnitCellVertices",function(){return this.unitCell.getVertices()});k(c$,"getCartesianOffset",function(){return this.unitCell.getCartesianOffset()});k(c$,"getFractionalOffset",function(){return this.unitCell.getFractionalOffset()});k(c$,"setOffsetPt",function(a){this.unitCell.setOffset(a)},"JU.T3");k(c$,"setOffset",function(a){var b=new JU.P3;JU.SimpleUnitCell.ijkToPoint3f(a,b,0);this.unitCell.setOffset(b)},"~N");k(c$,"getUnitCellMultiplier",
function(){return this.unitCell.getUnitCellMultiplier()});k(c$,"getCanonicalCopy",function(a,b){return this.unitCell.getCanonicalCopy(a,b)},"~N,~B");k(c$,"getUnitCellInfoType",function(a){return this.unitCell.getInfo(a)},"~N");k(c$,"getUnitCellInfo",function(){return this.unitCell.dumpInfo(!1)});k(c$,"isSlab",function(){return this.unitCell.isSlab()});k(c$,"isPolymer",function(){return this.unitCell.isPolymer()});k(c$,"setMinMaxLatticeParameters",function(a,b){this.unitCell.setMinMaxLatticeParameters(a,
b)},"JU.P3i,JU.P3i");k(c$,"checkDistance",function(a,b,c,e,g,h,f,d){return this.unitCell.checkDistance(a,b,c,e,g,h,f,d)},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");k(c$,"getUnitCellVectors",function(){return this.unitCell.getUnitCellVectors()});k(c$,"getUnitCell",function(a,b){this.unitCell=JS.UnitCell.newP(a,b);return this},"~A,~B");k(c$,"isSupercell",function(){return this.unitCell.isSupercell()});k(c$,"notInCentroid",function(a,b,c){try{var e=new JU.BS,g=b.nextSetBit(0),h=a.getMolecules(),f=h.length,
d=a.at,l=h[f-1].firstAtomIndex==a.am[d[g].mi].firstAtomIndex,j=new JU.P3,m=1==c[6];a=f;a:for(;0<=--a&&b.get(h[a].firstAtomIndex);){var n=h[a].atomList;j.set(0,0,0);for(var g=0,s=n.nextSetBit(0);0<=s;s=n.nextSetBit(s+1))if(l||m)if(j.setT(d[s]),this.isNotCentroid(j,1,c,m))l&&e.set(s);else{if(!l)continue a}else j.add(d[s]),g++;(m||0<g&&this.isNotCentroid(j,g,c,!1))&&e.or(n)}return e}catch(q){if(Y(q,Exception))return null;throw q;}},"JM.ModelSet,JU.BS,~A");d(c$,"isNotCentroid",function(a,b,c,e){a.scale(1/
b);this.toFractional(a,!1);return e?a.x+5E-6<=c[0]||a.x-5E-6>c[3]||a.y+5E-6<=c[1]||a.y-5E-6>c[4]||a.z+5E-6<=c[2]||a.z-5E-6>c[5]:a.x+5E-6<=c[0]||a.x+5E-5>c[3]||a.y+5E-6<=c[1]||a.y+5E-5>c[4]||a.z+5E-6<=c[2]||a.z+5E-5>c[5]},"JU.P3,~N,~A,~B");k(c$,"getSpaceGroupInfo",function(a,b,c,e,g,h,f){var d=null,l=null,j=null,m=null;if(null==c){0>=b&&(b=U(g,JM.Atom)?g.mi:a.vwr.am.cmi);var n=!1;if(0>b)d="no single current model";else if(!(n=null!=(j=a.am[b].biosymmetry))&&null==(j=a.getUnitCell(b)))d="not applicable";
null!=d?(l=new java.util.Hashtable,l.put("spaceGroupInfo",d),l.put("symmetryInfo","")):null==g&&(null==f&&0!=e)&&(l=a.getInfo(b,"spaceGroupInfo"));if(null!=l)return l;l=new java.util.Hashtable;null==g&&(null==f&&0==e)&&a.setInfo(b,"spaceGroupInfo",l);c=j.getSpaceGroupName();b=j.getSymmetryOperations();var s=n?j.spaceGroup:null,q="";if(null==b)d="\n no symmetry operations employed";else{n?this.spaceGroup=JS.SpaceGroup.getNull(!1).set(!1):this.setSpaceGroup(!1);for(var d="\n"+b.length+" symmetry operations employed:",
m=Array(b.length),r=null,k=0;k<b.length;k++){var p=b[k].xyz,y=n?this.addBioMoleculeOperation(s.finalOperations[k],!1):this.addSpaceGroupOperation("="+p,k+1);if(!(0>y)){var v=this.getSpaceGroupOperation(k),r=v.setCentering(r,!1),q=q+(";"+p);m[k]=0<e&&e-1!=y?null:v.getDescription(a,j,g,h,f);null!=m[k]&&(d+="\n"+(k+1)+"\t"+m[k][0]+"\t"+m[k][2])}}}q=q.substring(q.indexOf(";")+1);0<=c.indexOf("[--]")&&(c=q)}else l=new java.util.Hashtable;l.put("spaceGroupName",c);null!=m&&(l.put("operations",m),l.put("symmetryInfo",
d));if(!c.startsWith("bio")){a=this.getSpaceGroupInfoStr(c,j);if(null==a||a.equals("?"))a="could not identify space group from name: "+c+'\nformat: show spacegroup "2" or "P 2c" or "C m m m" or "x, y, z;-x ,-y, -z"';l.put("spaceGroupInfo",a)}return l},"JM.ModelSet,~N,~S,~N,JU.P3,JU.P3,~S,~S");k(c$,"getSymmetryInfoString",function(a,b,c,e,g,h,f){b=this.getSpaceGroupInfo(a,b,null,c,e,g,h,f);if(null==b)return"";a="label".equals(f);f="fmatrix".equals(f);b=b.get("operations");if(null==b)return"";e=new JU.SB;
c--;for(g=0;g<b.length;g++)if(!(null==b[g]||0<=c&&c!=g)){if(null!=h)return b[g][3];0<e.length()&&e.appendC("\n");f?e.append(JS.SymmetryOperation.cleanMatrix(b[g][10])).append("\t"):a||(0>c&&e.appendI(g+1).append("\t"),e.append(b[g][0]).append("\t"));e.append(b[g][2])}0==e.length()&&null!=h&&e.append("draw "+h+"* delete");return e.toString()},"JM.ModelSet,~N,~N,JU.P3,JU.P3,~S,~S");k(c$,"getSymmetryInfo",function(a,b,c,e,g,h,f,d,l,j){if(null!=d)return this.getSymmetryInfoString(a,b,h,f,d,null==l?"sym":
l,1826248716==j?"label":null);b=e.isBio();var m=h,n=null;if(null==g){var k=e.getSymmetryOperations();if(null==k||0==h||Math.abs(h)>k.length)return 135176==j?"draw ID sym_* delete":"";g=0<h?k[m=h-1].xyz:k[m=-1-h].xyz;n=k[m].centering}else m=h=0;k=a.getSymTemp(!0);k.setSpaceGroup(!1);g=b?k.addBioMoleculeOperation(e.spaceGroup.finalOperations[m],0>h):k.addSpaceGroupOperation((0>h?"!":"=")+g,Math.abs(h));if(0>g)return"";h=k.getSpaceGroupOperation(g);b||(h.centering=n);if(null!=f||0<=c)f=JU.P3.newP(null==
f?a.at[c]:f);if(135266320==j){if(b)return"";k.setUnitCell(e.getNotionalUnitCell(),!1);e.toFractional(f,!1);if(Float.isNaN(f.x))return"";j=new JU.P3;k.newSpaceGroupPoint(g,f,j,0,0,0);k.toCartesian(j,!1);return j}f=h.getDescription(a,e,f,d,null==l?"sym":l);a=f[9].intValue();switch(j){case 135266306:return f;case 1073742001:return[f[0],f[1],f[2],JU.Escape.eP(f[4]),JU.Escape.eP(f[5]),JU.Escape.eP(f[6]),JU.Escape.eP(f[7]),JU.Escape.eP(f[8]),""+f[9],""+JU.Escape.e(f[10])];case 1073741982:return f[0];default:case 1826248716:return f[2];
case 135176:return f[3];case 1073742178:return f[5];case 12289:return f[6];case 135266320:return f[7];case 1073741854:case 135266319:return 0==a==(135266319==j)?f[8]:null;case 135266305:return f[9];case 12:return f[10]}},"JM.ModelSet,~N,~N,J.api.SymmetryInterface,~S,~N,JU.P3,JU.P3,~S,~N");k(c$,"fcoord",function(a){return JS.SymmetryOperation.fcoord(a)},"JU.T3");k(c$,"getV0abc",function(a){if(null==this.unitCell)return null;var b,c=!1;if(U(a,String)){var e=a;0>e.indexOf(";")&&(e+=";0,0,0");(c=e.startsWith("!"))&&
(e=e.substring(1));a=new JS.Symmetry;a.setSpaceGroup(!1);b=a.addSpaceGroupOperation("="+e,0);if(0>b)return null;b=a.getSpaceGroupOperation(b);b.doFinalize()}else b=U(a,JU.M3)?JU.M4.newMV(a,new JU.P3):a;a=Array(4);var g=new JU.P3,e=new JU.M3;b.getRotationScale(e);b.getTranslation(g);c?(e.invert(),e.transpose(),e.rotate(g),g.scale(-1)):e.transpose();this.unitCell.toCartesian(g,!1);a[0]=JU.V3.newV(g);a[1]=JU.V3.new3(1,0,0);a[2]=JU.V3.new3(0,1,0);a[3]=JU.V3.new3(0,0,1);for(b=1;4>b;b++)e.rotate(a[b]),
this.unitCell.toCartesian(a[b],!0);return a},"~O");k(c$,"getQuaternionRotation",function(a){return null==this.unitCell?null:this.unitCell.getQuaternionRotation(a)},"~S")});H("JS");R(["JU.P3","$.V3"],"JS.PointGroup","java.lang.Float java.util.Hashtable JU.Lst $.Quat $.SB JU.BSUtil $.Escape $.Logger $.Txt".split(" "),function(){c$=Q(function(){this.textInfo=this.info=this.drawInfo=null;this.drawType="";this.drawIndex=0;this.scale=NaN;this.axes=this.nAxes=null;this.radius=this.nAtoms=0;this.distanceTolerance=
0.2;this.linearTolerance=8;this.cosTolerance=0.99;this.name="C_1?";this.vTemp=this.principalPlane=this.principalAxis=null;this.centerAtomIndex=-1;this.haveInversionCenter=!1;this.bsAtoms=this.elements=this.atoms=this.points=this.center=null;this.maxElement=0;this.eCounts=null;this.nOps=0;ea("JS.PointGroup.Operation")||JS.PointGroup.$PointGroup$Operation$();K(this,arguments)},JS,"PointGroup");W(c$,function(){this.nAxes=V(JS.PointGroup.maxAxis,0);this.axes=Array(JS.PointGroup.maxAxis);this.vTemp=new JU.V3;
this.center=new JU.P3});d(c$,"getName",function(){return this.name});c$.getPointGroup=d(c$,"getPointGroup",function(a,b,c,e,g,h){var f=new JS.PointGroup;return f.set(a,b,c,e,g,h)?f:a},"JS.PointGroup,~A,JU.BS,~B,~N,~N");D(c$,function(){});d(c$,"isEqual",function(a){if(null==a||this.linearTolerance!=a.linearTolerance||this.distanceTolerance!=a.distanceTolerance||this.nAtoms!=a.nAtoms||!this.bsAtoms.equals(a.bsAtoms))return!1;for(var b=0;b<this.nAtoms;b++)if(this.elements[b]!=a.elements[b]||0!=this.points[b].distance(a.points[b]))return!1;
return!0},"JS.PointGroup");d(c$,"set",function(a,b,c,e,g,h){this.distanceTolerance=g;this.linearTolerance=h;this.bsAtoms=c;this.cosTolerance=Math.cos(3.141592653589793*(h/180));if(!this.getAtomsAndElements(b,c))return JU.Logger.error("Too many atoms for point group calculation"),this.name="point group not determined -- ac > 100 -- select fewer atoms and try again.",!0;this.getElementCounts();if(e){b=Array(this.points.length);for(c=this.points.length;0<=--c;)b[c]=JU.P3.newP(this.points[c]),e=this.atoms[c].getVibrationVector(),
null!=e&&b[c].add(e);this.points=b}if(this.isEqual(a))return!1;this.findInversionCenter();if(this.isLinear(this.points))return this.name=this.haveInversionCenter?"D(infinity)h":"C(infinity)v",this.vTemp.sub2(this.points[1],this.points[0]),this.addAxis(16,this.vTemp),this.principalAxis=this.axes[16][0],this.haveInversionCenter&&(this.axes[0]=Array(1),this.principalPlane=this.axes[0][this.nAxes[0]++]=X(JS.PointGroup.Operation,this,null,this.vTemp)),!0;this.axes[0]=Array(15);a=0;this.findCAxes();a=this.findPlanes();
this.findAdditionalAxes(a);b=this.getHighestOrder();if(1<this.nAxes[17])this.name=1<this.nAxes[19]?this.haveInversionCenter?"Ih":"I":1<this.nAxes[18]?this.haveInversionCenter?"Oh":"O":0<a?this.haveInversionCenter?"Th":"Td":"T";else if(2>b){if(1==a)return this.name="Cs",!0;if(this.haveInversionCenter)return this.name="Ci",!0;this.name="C1"}else 1==b%2&&0<this.nAxes[16]||0==b%2&&1<this.nAxes[16]?(this.principalAxis=this.setPrincipalAxis(b,a),0==a?this.name=14>b?"S"+b:"D"+(b-14):(b=14>b?y(b/2):b-14,
this.name=a==b?"D"+b+"d":"D"+b+"h")):0==a?(this.principalAxis=this.axes[b][0],this.name=14>b?"S"+b:"C"+(b-14)):a==b-14?(this.principalAxis=this.axes[b][0],this.name="C"+a+"v"):(this.principalAxis=this.axes[14>b?b+14:b][0],this.principalPlane=this.axes[0][0],this.name="C"+(14>b?b/2:b-14)+"h");return!0},"JS.PointGroup,~A,JU.BS,~B,~N,~N");d(c$,"setPrincipalAxis",function(a,b){var c=this.setPrincipalPlane(a,b);if(0==b&&14>a||1==this.nAxes[a])return 0<b&&14>a&&(a=14+y(a/2)),this.axes[a][0];if(null==c)return null;
for(var e=0;e<this.nAxes[16];e++)if(this.isParallel(c.normalOrAxis,this.axes[16][e].normalOrAxis))return 0!=e&&(c=this.axes[16][0],this.axes[16][0]=this.axes[16][e],this.axes[16][e]=c),this.axes[16][0];return null},"~N,~N");d(c$,"setPrincipalPlane",function(a,b){if(1==b)return this.principalPlane=this.axes[0][0];if(0==b||b==a-14)return null;for(var c=0;c<b;c++)for(var e=0,g=0;e<b;e++)if(this.isPerpendicular(this.axes[0][c].normalOrAxis,this.axes[0][e].normalOrAxis)&&2<++g)return 0!=c&&(e=this.axes[0][0],
this.axes[0][0]=this.axes[0][c],this.axes[0][c]=e),this.principalPlane=this.axes[0][0];return null},"~N,~N");d(c$,"getAtomsAndElements",function(a,b){var c=JU.BSUtil.cardinalityOf(b);if(100<c)return!1;this.points=Array(c);this.atoms=Array(c);this.elements=V(c,0);if(0==c)return!0;this.nAtoms=0;for(c=b.nextSetBit(0);0<=c;c=b.nextSetBit(c+1)){this.points[this.nAtoms]=JU.P3.newP(a[c]);this.atoms[this.nAtoms]=a[c];var e=1+Math.max(3,a[c].getCovalentBondCount());this.elements[this.nAtoms]=a[c].getElementNumber()*
e;this.center.add(this.points[this.nAtoms++])}this.center.scale(1/this.nAtoms);for(c=this.nAtoms;0<=--c;)e=this.center.distance(this.points[c]),e<this.distanceTolerance&&(this.centerAtomIndex=c),this.radius=Math.max(this.radius,e);return!0},"~A,JU.BS");d(c$,"findInversionCenter",function(){if(this.haveInversionCenter=this.checkOperation(null,this.center,-1))this.axes[1]=Array(1),this.axes[1][0]=X(JS.PointGroup.Operation,this,null)});d(c$,"checkOperation",function(a,b,c){var e=new JU.P3,g=0;c=14>c;
var h=this.points.length;a:for(;0<=--h&&g<this.points.length;)if(h==this.centerAtomIndex)g++;else{var f=this.points[h],d=this.elements[h];null!=a?(e.sub2(f,b),a.transformP2(e,e).add(b)):e.setT(f);c&&(this.vTemp.sub2(b,e),e.scaleAdd2(2,this.vTemp,e));if((null!=a||c)&&e.distance(f)<this.distanceTolerance)g++;else for(f=this.points.length;0<=--f;)if(!(f==h||this.elements[f]!=d)&&e.distance(this.points[f])<this.distanceTolerance){g++;continue a}}return g==this.points.length},"JU.Quat,JU.P3,~N");d(c$,
"isLinear",function(a){var b=null;if(2>a.length)return!1;for(var c=a.length;0<=--c;)if(c!=this.centerAtomIndex)if(null==b)b=new JU.V3,b.sub2(a[c],this.center),b.normalize(),this.vTemp.setT(b);else if(this.vTemp.sub2(a[c],this.center),this.vTemp.normalize(),!this.isParallel(b,this.vTemp))return!1;return!0},"~A");d(c$,"isParallel",function(a,b){return Math.abs(a.dot(b))>=this.cosTolerance},"JU.V3,JU.V3");d(c$,"isPerpendicular",function(a,b){return Math.abs(a.dot(b))<=1-this.cosTolerance},"JU.V3,JU.V3");
d(c$,"getElementCounts",function(){for(var a=this.points.length;0<=--a;){var b=this.elements[a];b>this.maxElement&&(this.maxElement=b)}this.eCounts=V(++this.maxElement,0);for(a=this.points.length;0<=--a;)this.eCounts[this.elements[a]]++});d(c$,"findCAxes",function(){for(var a=new JU.V3,b=new JU.V3,c=new JU.V3,e=this.points.length;0<=--e;)if(e!=this.centerAtomIndex)for(var g=this.points[e],h=this.elements[e],f=this.points.length;--f>e;){var d=this.points[f];if(this.elements[f]==h)if(a.sub2(g,this.center),
b.sub2(d,this.center),a.normalize(),b.normalize(),this.isParallel(a,b))this.getAllAxes(a);else{this.nAxes[16]<JS.PointGroup.axesMaxN[16]&&(c.ave(g,d),c.sub(this.center),this.getAllAxes(c));var d=6.283185307179586/a.angle(b),l=y(Math.floor(d+0.01));if(0.02>=d-l&&!((l+=14)>=JS.PointGroup.maxAxis)&&this.nAxes[l]<JS.PointGroup.axesMaxN[l])c.cross(a,b),this.checkAxisOrder(l,c,this.center)}}g=Array(2*this.nAxes[16]);for(e=0;e<g.length;e++)g[e]=new JU.V3;for(e=f=0;e<this.nAxes[16];e++)g[f++].setT(this.axes[16][e].normalOrAxis),
g[f].setT(this.axes[16][e].normalOrAxis),g[f++].scale(-1);for(e=g.length;2<=--e;)for(f=e;1<=--f;)for(h=f;0<=--h;)c.add2(g[e],g[f]),c.add(g[h]),1>c.length()||this.checkAxisOrder(17,c,this.center);f=2147483647;g=-1;for(e=0;e<this.maxElement;e++)this.eCounts[e]<f&&2<this.eCounts[e]&&(f=this.eCounts[e],g=e);e=0;a:for(;e<this.points.length-2;e++)if(this.elements[e]==g)for(f=e+1;f<this.points.length-1;f++)if(this.elements[f]==g)for(h=f+1;h<this.points.length;h++)if(this.elements[h]==g&&(a.sub2(this.points[e],
this.points[f]),b.sub2(this.points[e],this.points[h]),a.normalize(),b.normalize(),c.cross(a,b),this.getAllAxes(c),a.add2(this.points[e],this.points[f]),a.add(this.points[h]),a.normalize(),this.isParallel(a,c)||this.getAllAxes(a),this.nAxes[19]==JS.PointGroup.axesMaxN[19]))break a;g=Array(this.maxElement);for(e=this.points.length;0<=--e;){h=this.elements[e];if(null==g[h])g[h]=new JU.V3;else if(this.haveInversionCenter)continue;g[h].add(this.points[e])}if(!this.haveInversionCenter)for(e=0;e<this.maxElement;e++)null!=
g[e]&&g[e].scale(1/this.eCounts[e]);for(e=0;e<this.maxElement;e++)if(null!=g[e])for(f=0;f<this.maxElement;f++)e==f||null==g[f]||(this.haveInversionCenter?a.cross(g[e],g[f]):a.sub2(g[e],g[f]),this.checkAxisOrder(16,a,this.center));return this.getHighestOrder()});d(c$,"getAllAxes",function(a){for(var b=16;b<JS.PointGroup.maxAxis;b++)this.nAxes[b]<JS.PointGroup.axesMaxN[b]&&this.checkAxisOrder(b,a,this.center)},"JU.V3");d(c$,"getHighestOrder",function(){for(var a=0,a=14;1<--a&&0==this.nAxes[a];);if(1<
a)return a+14<JS.PointGroup.maxAxis&&0<this.nAxes[a+14]?a+14:a;for(a=JS.PointGroup.maxAxis;1<--a&&0==this.nAxes[a];);return a});d(c$,"checkAxisOrder",function(a,b,c){switch(a){case 22:if(0<this.nAxes[17])return!1;case 20:case 18:if(0<this.nAxes[19])return!1;break;case 17:if(0<this.nAxes[22])return!1;break;case 19:if(0<this.nAxes[18]||0<this.nAxes[20]||0<this.nAxes[22])return!1}b.normalize();if(this.haveAxis(a,b))return!1;var e=JU.Quat.newVA(b,(14>a?180:0)+y(360/(a%14)));if(!this.checkOperation(e,
c,a))return!1;this.addAxis(a,b);switch(a){case 16:this.checkAxisOrder(4,b,c);break;case 17:this.checkAxisOrder(3,b,c);this.haveInversionCenter&&this.addAxis(6,b);break;case 18:this.addAxis(16,b);this.checkAxisOrder(4,b,c);this.checkAxisOrder(8,b,c);break;case 19:this.checkAxisOrder(5,b,c);this.haveInversionCenter&&this.addAxis(10,b);break;case 20:this.addAxis(16,b);this.addAxis(17,b);this.checkAxisOrder(3,b,c);this.checkAxisOrder(6,b,c);this.checkAxisOrder(12,b,c);break;case 22:this.addAxis(16,b),
this.addAxis(18,b)}return!0},"~N,JU.V3,JU.P3");d(c$,"addAxis",function(a,b){this.haveAxis(a,b)||(null==this.axes[a]&&(this.axes[a]=Array(JS.PointGroup.axesMaxN[a])),this.axes[a][this.nAxes[a]++]=X(JS.PointGroup.Operation,this,null,b,a))},"~N,JU.V3");d(c$,"haveAxis",function(a,b){if(this.nAxes[a]==JS.PointGroup.axesMaxN[a])return!0;if(0<this.nAxes[a])for(var c=this.nAxes[a];0<=--c;)if(this.isParallel(b,this.axes[a][c].normalOrAxis))return!0;return!1},"~N,JU.V3");d(c$,"findPlanes",function(){for(var a=
new JU.P3,b=new JU.V3,c=new JU.V3,e=new JU.V3,g=0,h=1<this.getHighestOrder(),f=this.points.length;0<=--f;)if(f!=this.centerAtomIndex)for(var d=this.points[f],l=this.elements[f],j=this.points.length;--j>f;)if(!(h&&this.elements[j]!=l)&&(g=this.points[j],a.add2(d,g),a.scale(0.5),b.sub2(d,this.center),c.sub2(g,this.center),this.isParallel(b,c)||(e.cross(b,c),e.normalize(),this.getPlane(e)),e.sub2(g,d),e.normalize(),g=this.getPlane(e),g==JS.PointGroup.axesMaxN[0]))return g;if(h)for(f=16;f<JS.PointGroup.maxAxis;f++)for(j=
0;j<this.nAxes[f];j++)g=this.getPlane(this.axes[f][j].normalOrAxis);return g});d(c$,"getPlane",function(a){!this.haveAxis(0,a)&&this.checkOperation(JU.Quat.newVA(a,180),this.center,-1)&&(this.axes[0][this.nAxes[0]++]=X(JS.PointGroup.Operation,this,null,a));return this.nAxes[0]},"JU.V3");d(c$,"findAdditionalAxes",function(a){var b=this.axes[0],c=0;if(1<a&&(c=a+14)<JS.PointGroup.maxAxis&&0==this.nAxes[c])this.vTemp.cross(b[0].normalOrAxis,b[1].normalOrAxis),!this.checkAxisOrder(c,this.vTemp,this.center)&&
2<a&&(this.vTemp.cross(b[1].normalOrAxis,b[2].normalOrAxis),this.checkAxisOrder(c-1,this.vTemp,this.center));if(0==this.nAxes[16]&&2<a)for(c=0;c<a-1;c++)for(var e=c+1;e<a;e++)this.vTemp.add2(b[1].normalOrAxis,b[2].normalOrAxis),this.checkAxisOrder(16,this.vTemp,this.center)},"~N");d(c$,"getInfo",function(a,b,c,e,g,h){this.info=c?new java.util.Hashtable:null;var f=new JU.V3,d;0==h&&(h=1);this.scale=h;c=V(4,2,0);for(var l=1;l<JS.PointGroup.maxAxis;l++)for(var j=this.nAxes[l];0<=--j;)c[this.axes[l][j].type][0]++;
var m=(new JU.SB).append("# ").appendI(this.nAtoms).append(" atoms\n");if(b){this.drawType=e=(b=null!=e&&0<e.length)?e:"";this.drawIndex=g;var n=e.equalsIgnoreCase("Cn"),k=e.equalsIgnoreCase("Sn");m.append("set perspectivedepth off;\n");var q="_"+a+"_";b||m.append("draw pg0").append(q).append("* delete;draw pgva").append(q).append("* delete;draw pgvp").append(q).append("* delete;");if(!b||e.equalsIgnoreCase("Ci"))m.append("draw pg0").append(q).append(this.haveInversionCenter?"inv ":" ").append(JU.Escape.eP(this.center)).append(this.haveInversionCenter?
'"i";\n':";\n");for(var r=0.1,l=2;l<JS.PointGroup.maxAxis;l++)if(14==l&&(r=0.1),0!=this.nAxes[l]){a=this.axes[l][0].getLabel();var r=r+0.25,p=h*this.radius+r;if(!b||e.equalsIgnoreCase(a)||n&&14<=l||k&&14>l)for(j=0;j<this.nAxes[l];j++)if(!(0<g&&j+1!=g)){d=this.axes[l][j];f.add2(d.normalOrAxis,this.center);2==d.type&&(p=-p);m.append("draw pgva").append(q).append(a).append("_").appendI(j+1).append(" width 0.05 scale ").appendF(p).append(" ").append(JU.Escape.eP(f));f.scaleAdd2(-2,d.normalOrAxis,f);var y=
null!=this.principalAxis&&d.index==this.principalAxis.index;m.append(JU.Escape.eP(f)).append('"').append(a).append(y?"*":"").append('" color ').append(y?"red":2==d.type?"blue":"yellow").append(";\n")}}if(!b||e.equalsIgnoreCase("Cs"))for(j=0;j<this.nAxes[0];j++)0<g&&j+1!=g||(d=this.axes[0][j],m.append("draw pgvp").append(q).appendI(j+1).append("disk scale ").appendF(2*h*this.radius).append(" CIRCLE PLANE ").append(JU.Escape.eP(this.center)),f.add2(d.normalOrAxis,this.center),m.append(JU.Escape.eP(f)).append(" color translucent yellow;\n"),
f.add2(d.normalOrAxis,this.center),m.append("draw pgvp").append(q).appendI(j+1).append("ring width 0.05 scale ").appendF(2*h*this.radius).append(" arc ").append(JU.Escape.eP(f)),f.scaleAdd2(-2,d.normalOrAxis,f),m.append(JU.Escape.eP(f)),f.add3(0.011,0.012,0.013),m.append(JU.Escape.eP(f)).append("{0 360 0.5} color ").append(null!=this.principalPlane&&d.index==this.principalPlane.index?"red":"blue").append(";\n"));m.append("# name=").append(this.name);m.append(", nCi=").appendI(this.haveInversionCenter?
1:0);m.append(", nCs=").appendI(this.nAxes[0]);m.append(", nCn=").appendI(c[1][0]);m.append(", nSn=").appendI(c[2][0]);m.append(": ");for(l=JS.PointGroup.maxAxis;2<=--l;)0<this.nAxes[l]&&(m.append(" n").append(14>l?"S":"C").appendI(l%14),m.append("=").appendI(this.nAxes[l]));m.append(";\n");return this.drawInfo=m.toString()}j=0;e=1;l=this.haveInversionCenter?"Ci":"center";this.haveInversionCenter&&e++;null==this.info?m.append("\n\n").append(this.name).append("\t").append(l).append("\t").append(JU.Escape.eP(this.center)):
this.info.put(l,this.center);for(l=JS.PointGroup.maxAxis;0<=--l;)if(0<this.nAxes[l]){j=JS.PointGroup.nUnique[l];a=this.axes[l][0].getLabel();null==this.info?m.append("\n\n").append(this.name).append("\tn").append(a).append("\t").appendI(this.nAxes[l]).append("\t").appendI(j):this.info.put("n"+a,Integer.$valueOf(this.nAxes[l]));j*=this.nAxes[l];e+=j;c[this.axes[l][0].type][1]+=j;g=null==this.info?null:new JU.Lst;for(j=0;j<this.nAxes[l];j++)null==g?m.append("\n").append(this.name).append("\t").append(a).append("_").appendI(j+
1).append("\t").appendO(this.axes[l][j].normalOrAxis):g.addLast(this.axes[l][j].normalOrAxis);null!=this.info&&this.info.put(a,g)}if(null==this.info)return m.append("\n"),m.append("\n").append(this.name).append("\ttype\tnType\tnUnique"),m.append("\n").append(this.name).append("\tE\t  1\t  1"),j=this.haveInversionCenter?1:0,m.append("\n").append(this.name).append("\tCi\t  ").appendI(j).append("\t  ").appendI(j),m.append("\n").append(this.name).append("\tCs\t"),JU.Txt.rightJustify(m,"    ",this.nAxes[0]+
"\t"),JU.Txt.rightJustify(m,"    ",this.nAxes[0]+"\n"),m.append(this.name).append("\tCn\t"),JU.Txt.rightJustify(m,"    ",c[1][0]+"\t"),JU.Txt.rightJustify(m,"    ",c[1][1]+"\n"),m.append(this.name).append("\tSn\t"),JU.Txt.rightJustify(m,"    ",c[2][0]+"\t"),JU.Txt.rightJustify(m,"    ",c[2][1]+"\n"),m.append(this.name).append("\t\tTOTAL\t"),JU.Txt.rightJustify(m,"    ",e+"\n"),this.textInfo=m.toString();this.info.put("name",this.name);this.info.put("nAtoms",Integer.$valueOf(this.nAtoms));this.info.put("nTotal",
Integer.$valueOf(e));this.info.put("nCi",Integer.$valueOf(this.haveInversionCenter?1:0));this.info.put("nCs",Integer.$valueOf(this.nAxes[0]));this.info.put("nCn",Integer.$valueOf(c[1][0]));this.info.put("nSn",Integer.$valueOf(c[2][0]));this.info.put("distanceTolerance",Float.$valueOf(this.distanceTolerance));this.info.put("linearTolerance",Float.$valueOf(this.linearTolerance));this.info.put("detail",m.toString().$replace("\n",";"));null!=this.principalAxis&&0<this.principalAxis.index&&this.info.put("principalAxis",
this.principalAxis.normalOrAxis);null!=this.principalPlane&&0<this.principalPlane.index&&this.info.put("principalPlane",this.principalPlane.normalOrAxis);return this.info},"~N,~B,~B,~S,~N,~N");d(c$,"isDrawType",function(a,b,c){return null!=this.drawInfo&&this.drawType.equals(null==a?"":a)&&this.drawIndex==b&&this.scale==c},"~S,~N,~N");c$.$PointGroup$Operation$=function(){da(self.c$);c$=Q(function(){fa(this,arguments);this.index=this.order=this.type=0;this.normalOrAxis=null;K(this,arguments)},JS.PointGroup,
"Operation");D(c$,function(){this.index=++this.b$["JS.PointGroup"].nOps;this.type=3;this.order=1;JU.Logger.debugging&&JU.Logger.debug("new operation -- "+JS.PointGroup.typeNames[this.type])});D(c$,function(a,b){this.index=++this.b$["JS.PointGroup"].nOps;this.type=14>b?2:1;this.order=b%14;this.normalOrAxis=JU.Quat.newVA(a,180).getNormal();JU.Logger.debugging&&JU.Logger.debug("new operation -- "+(this.order==b?"S":"C")+this.order+" "+this.normalOrAxis)},"JU.V3,~N");D(c$,function(a){null!=a&&(this.index=
++this.b$["JS.PointGroup"].nOps,this.type=0,this.normalOrAxis=JU.Quat.newVA(a,180).getNormal(),JU.Logger.debugging&&JU.Logger.debug("new operation -- plane "+this.normalOrAxis))},"JU.V3");d(c$,"getLabel",function(){switch(this.type){case 0:return"Cs";case 2:return"S"+this.order;default:return"C"+this.order}});c$=ca()};S(c$,"axesMaxN",[15,0,0,1,3,1,10,0,1,0,6,0,1,0,0,0,15,10,6,6,10,0,1],"nUnique",[1,0,0,2,2,4,2,0,4,0,4,0,4,0,0,0,1,2,2,4,2,0,4],"s3",3,"s4",4,"s5",5,"s6",6,"s8",8,"s10",10,"s12",12,"firstProper",
14,"c2",16,"c3",17,"c4",18,"c5",19,"c6",20,"c8",22);c$.maxAxis=c$.prototype.maxAxis=JS.PointGroup.axesMaxN.length;S(c$,"ATOM_COUNT_MAX",100,"OPERATION_PLANE",0,"OPERATION_PROPER_AXIS",1,"OPERATION_IMPROPER_AXIS",2,"OPERATION_INVERSION_CENTER",3,"typeNames",["plane","proper axis","improper axis","center of inversion"])});H("JS");R(["java.util.Hashtable"],"JS.SpaceGroup","java.lang.Character $.Float java.util.Arrays JU.AU $.Lst $.M4 $.P3 $.PT $.SB JS.HallInfo $.HallTranslation $.SymmetryOperation JU.Logger".split(" "),
function(){c$=Q(function(){this.index=0;this.isSSG=!1;this.name="unknown!";this.hmSymbolAbbrShort=this.hmSymbolAlternative=this.hmSymbolAbbr=this.hmSymbolExt=this.hmSymbolFull=this.hmSymbol=this.hallSymbol=null;this.axisChoice=this.uniqueAxis=this.ambiguityType="\x00";this.hallInfo=this.intlTableNumberExt=this.intlTableNumberFull=this.intlTableNumber=null;this.latticeParameter=0;this.latticeCode="\x00";this.finalOperations=this.operations=null;this.operationCount=0;this.latticeOp=-1;this.xyzList=
null;this.modDim=0;this.doNormalize=!0;this.isBilbao=this.isBio=!1;this.latticeOps=null;K(this,arguments)},JS,"SpaceGroup");W(c$,function(){this.xyzList=new java.util.Hashtable});c$.getNull=d(c$,"getNull",function(a){JS.SpaceGroup.getSpaceGroups();return new JS.SpaceGroup(null,a)},"~B");D(c$,function(a,b){this.index=++JS.SpaceGroup.sgIndex;b&&(null==a?this.addSymmetry("x,y,z",0,!1):this.buildSpaceGroup(a))},"~S,~B");d(c$,"set",function(a){this.doNormalize=a;return this},"~B");c$.createSpaceGroup=
d(c$,"createSpaceGroup",function(a,b,c){var e=null;0<=a?e=JS.SpaceGroup.getSpaceGroups()[a]:(e=U(c,JU.Lst)?JS.SpaceGroup.createSGFromList(b,c):JS.SpaceGroup.determineSpaceGroupNA(b,c),null==e&&(e=JS.SpaceGroup.createSpaceGroupN(b)));null!=e&&e.generateAllOperators(null);return e},"~N,~S,~O");c$.createSGFromList=d(c$,"createSGFromList",function(a,b){var c=new JS.SpaceGroup("0;--;--;--",!0);c.doNormalize=!1;c.name=a;for(var e=b.size(),g=0;g<e;g++){var d=b.get(g);if(U(d,JS.SymmetryOperation)){var f=
c.addOp(d,d.xyz,!1);c.operations[f].timeReversal=d.timeReversal}else c.addSymmetrySM("xyz matrix:"+d,d)}e=c.getDerivedSpaceGroup();null!=e&&(c=e);return c},"~S,JU.Lst");d(c$,"addSymmetry",function(a,b,c){a=a.toLowerCase();return 0>a.indexOf("[[")&&0>a.indexOf("x4")&&0>a.indexOf(";")&&(0>a.indexOf("x")||0>a.indexOf("y")||0>a.indexOf("z"))?-1:this.addOperation(a,b,c)},"~S,~N,~B");d(c$,"setFinalOperations",function(a,b,c,e){if(null==this.hallInfo&&0!=this.latticeParameter){var g=new JS.HallInfo(JS.HallTranslation.getHallLatticeEquivalent(this.latticeParameter));
this.generateAllOperators(g)}this.finalOperations=null;this.isBio=0<=this.name.indexOf("bio");this.index>=JS.SpaceGroup.getSpaceGroups().length&&(!this.isBio&&0>this.name.indexOf("SSG:")&&0>this.name.indexOf("[subsystem"))&&(g=this.getDerivedSpaceGroup(),null!=g&&(this.name=g.getName()));this.finalOperations=Array(this.operationCount);if(e&&0<c&&null!=a){this.finalOperations[0]=new JS.SymmetryOperation(this.operations[0],a,b,c,!0);var d=a[b],f=JU.P3.newP(d);this.finalOperations[0].rotTrans(f);if(1E-4<
f.distance(d))for(g=0;g<c;g++)d=a[b+g],f.setT(d),this.finalOperations[0].rotTrans(f),d.setT(f)}d=null;for(g=0;g<this.operationCount;g++)this.finalOperations[g]=new JS.SymmetryOperation(this.operations[g],a,b,c,e),d=this.finalOperations[g].setCentering(d,!0)},"~A,~N,~N,~B");d(c$,"getOperationCount",function(){return this.finalOperations.length});d(c$,"getOperation",function(a){return this.finalOperations[a]},"~N");d(c$,"getXyz",function(a,b){return null==this.finalOperations?this.operations[a].getXyz(b):
this.finalOperations[a].getXyz(b)},"~N,~B");d(c$,"newPoint",function(a,b,c,e,g,d){this.finalOperations[a].newPoint(b,c,e,g,d)},"~N,JU.P3,JU.P3,~N,~N,~N");c$.getInfo=d(c$,"getInfo",function(a,b){var c;if(null!=b){0<=a.indexOf("[")&&(a=a.substring(0,a.indexOf("[")).trim());if(a.equals("unspecified!"))return"no space group identified in file";c=JS.SpaceGroup.determineSpaceGroupNA(a,b.getNotionalUnitCell())}else{if(a.equalsIgnoreCase("ALL"))return JS.SpaceGroup.dumpAll();if(a.equalsIgnoreCase("ALLSEITZ"))return JS.SpaceGroup.dumpAllSeitz();
c=JS.SpaceGroup.determineSpaceGroupN(a);if(null==c)c=JS.SpaceGroup.createSpaceGroupN(a);else{for(var e=new JU.SB;null!=c;)e.append(c.dumpInfo(null)),c=JS.SpaceGroup.determineSpaceGroupNS(a,c);return e.toString()}}return null==c?"?":c.dumpInfo(b)},"~S,J.api.SymmetryInterface");d(c$,"dumpInfo",function(){var a=this.dumpCanonicalSeitzList();if(U(a,JS.SpaceGroup))return a.dumpInfo(null);var b=(new JU.SB).append("\nHermann-Mauguin symbol: ");b.append(this.hmSymbol).append(0<this.hmSymbolExt.length?":"+
this.hmSymbolExt:"").append("\ninternational table number: ").append(this.intlTableNumber).append(0<this.intlTableNumberExt.length?":"+this.intlTableNumberExt:"").append("\n\n").appendI(this.operationCount).append(" operators").append(!this.hallInfo.hallSymbol.equals("--")?" from Hall symbol "+this.hallInfo.hallSymbol:"").append(": ");for(var c=0;c<this.operationCount;c++)b.append("\n").append(this.operations[c].xyz);b.append("\n\n").append(null==this.hallInfo?"invalid Hall symbol":this.hallInfo.dumpInfo());
b.append("\n\ncanonical Seitz: ").append(a).append("\n----------------------------------------------------\n");return b.toString()},"J.api.SymmetryInterface");d(c$,"getName",function(){return this.name});d(c$,"getLatticeDesignation",function(){return this.latticeCode+": "+JS.HallTranslation.getLatticeDesignation(this.latticeParameter)});d(c$,"setLatticeParam",function(a){this.latticeParameter=a;this.latticeCode=JS.HallTranslation.getLatticeCode(a);10<a&&(this.latticeParameter=-JS.HallTranslation.getLatticeIndex(this.latticeCode))},
"~N");d(c$,"dumpCanonicalSeitzList",function(){null==this.hallInfo&&(this.hallInfo=new JS.HallInfo(this.hallSymbol));this.generateAllOperators(null);var a=this.getCanonicalSeitzList();if(this.index>=JS.SpaceGroup.SG.length){var b=JS.SpaceGroup.findSpaceGroup(a);if(null!=b)return b}return(0<=this.index&&this.index<JS.SpaceGroup.SG.length?this.hallSymbol+" = ":"")+a});d(c$,"getDerivedSpaceGroup",function(){if(0<=this.index&&this.index<JS.SpaceGroup.SG.length||0<this.modDim)return this;null!=this.finalOperations&&
this.setFinalOperations(null,0,0,!1);var a=this.getCanonicalSeitzList();return null==a?null:JS.SpaceGroup.findSpaceGroup(a)});d(c$,"getCanonicalSeitzList",function(){for(var a=Array(this.operationCount),b=0;b<this.operationCount;b++){if(0!=this.operations[b].timeReversal)return null;a[b]=JS.SymmetryOperation.dumpCanonicalSeitz(this.operations[b])}java.util.Arrays.sort(a,0,this.operationCount);for(var c=(new JU.SB).append("\n["),b=0;b<this.operationCount;b++)c.append(a[b].$replace("\t"," ").$replace("\n",
" ")).append("; ");c.append("]");return c.toString()});c$.findSpaceGroup=d(c$,"findSpaceGroup",function(a){JS.SpaceGroup.getSpaceGroups();null==JS.SpaceGroup.canonicalSeitzList&&(JS.SpaceGroup.canonicalSeitzList=Array(JS.SpaceGroup.SG.length));for(var b=0;b<JS.SpaceGroup.SG.length;b++)if(null==JS.SpaceGroup.canonicalSeitzList[b]&&(JS.SpaceGroup.canonicalSeitzList[b]=JS.SpaceGroup.SG[b].dumpCanonicalSeitzList()),0<=JS.SpaceGroup.canonicalSeitzList[b].indexOf(a))return JS.SpaceGroup.SG[b];return null},
"~S");c$.dumpAll=d(c$,"dumpAll",function(){var a=new JU.SB;JS.SpaceGroup.getSpaceGroups();for(var b=0;b<JS.SpaceGroup.SG.length;b++)a.append("\n----------------------\n"+JS.SpaceGroup.SG[b].dumpInfo(null));return a.toString()});c$.dumpAllSeitz=d(c$,"dumpAllSeitz",function(){JS.SpaceGroup.getSpaceGroups();for(var a=new JU.SB,b=0;b<JS.SpaceGroup.SG.length;b++)a.append("\n").appendO(JS.SpaceGroup.SG[b].dumpCanonicalSeitzList());return a.toString()});d(c$,"setLattice",function(a,b){this.latticeCode=a;
this.latticeParameter=JS.HallTranslation.getLatticeIndex(a);b||(this.latticeParameter=-this.latticeParameter)},"~S,~B");c$.createSpaceGroupN=d(c$,"createSpaceGroupN",function(a){JS.SpaceGroup.getSpaceGroups();a=a.trim();var b=JS.SpaceGroup.determineSpaceGroupN(a),c;null==b&&(c=new JS.HallInfo(a),0<c.nRotations?(b=new JS.SpaceGroup("0;--;--;"+a,!0),b.hallInfo=c):0<=a.indexOf(",")&&(b=new JS.SpaceGroup("0;--;--;--",!0),b.doNormalize=!1,b.generateOperatorsFromXyzInfo(a)));null!=b&&b.generateAllOperators(null);
return b},"~S");d(c$,"addOperation",function(a,b,c){if(null==a||3>a.length)return this.xyzList=new java.util.Hashtable,-1;var e="="==a.charAt(0);e&&(a=a.substring(1));if(this.xyzList.containsKey(a))return this.xyzList.get(a).intValue();a.startsWith("x1,x2,x3,x4")&&0==this.modDim&&(this.xyzList.clear(),this.operationCount=0,this.modDim=JU.PT.parseInt(a.substring(a.lastIndexOf("x")+1))-3);b=new JS.SymmetryOperation(null,null,0,b,this.doNormalize);return!b.setMatrixFromXYZ(a,this.modDim,c)?(JU.Logger.error("couldn't interpret symmetry operation: "+
a),-1):this.addOp(b,a,e)},"~S,~N,~B");d(c$,"addOp",function(a,b,c){var e=a.xyz;if(!c){if(this.xyzList.containsKey(e))return this.xyzList.get(e).intValue();0>this.latticeOp&&this.xyzList.containsKey(JU.PT.replaceAllCharacters(e,"+123/",""))&&(this.latticeOp=this.operationCount);this.xyzList.put(e,Integer.$valueOf(this.operationCount))}null!=e&&!e.equals(b)&&this.xyzList.put(b,Integer.$valueOf(this.operationCount));null==this.operations&&(this.operations=Array(4));this.operationCount==this.operations.length&&
(this.operations=JU.AU.arrayCopyObject(this.operations,2*this.operationCount));this.operations[this.operationCount++]=a;a.index=this.operationCount;JU.Logger.debugging&&JU.Logger.debug("\naddOperation "+this.operationCount+a.dumpInfo());return this.operationCount-1},"JS.SymmetryOperation,~S,~B");d(c$,"generateOperatorsFromXyzInfo",function(a){this.addOperation(null,0,!1);this.addSymmetry("x,y,z",0,!1);a=JU.PT.split(a.toLowerCase(),";");for(var b=0;b<a.length;b++)this.addSymmetry(a[b],0,!1)},"~S");
d(c$,"generateAllOperators",function(a){if(null==a){a=this.hallInfo;if(0<this.operationCount)return;this.operations=Array(4);if(null==this.hallInfo||0==this.hallInfo.nRotations)a=this.hallInfo=new JS.HallInfo(this.hallSymbol);this.setLattice(this.hallInfo.latticeCode,this.hallInfo.isCentrosymmetric);this.addOperation(null,0,!1);this.addSymmetry("x,y,z",0,!1)}for(var b=new JU.M4,c=new JU.M4,e=Array(7),g=0;7>g;g++)e[g]=new JU.M4;for(g=0;g<a.nRotations;g++){b.setM4(a.rotationTerms[g].seitzMatrix12ths);
var d=a.rotationTerms[g].order;e[0].setIdentity();for(var f=this.operationCount,k=1;k<=d;k++){e[k].mul2(b,e[0]);e[0].setM4(e[k]);for(var l=0;l<f;l++){c.mul2(e[k],this.operations[l]);JS.SymmetryOperation.normalizeTranslation(c);var j=JS.SymmetryOperation.getXYZFromMatrix(c,!0,!0,!0);this.addSymmetrySM(j,c)}}}},"JS.HallInfo");d(c$,"addSymmetrySM",function(a,b){var c=this.addOperation(a,0,!1);0<=c&&this.operations[c].setM4(b);return c},"~S,JU.M4");c$.determineSpaceGroupN=d(c$,"determineSpaceGroupN",
function(a){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1)},"~S");c$.determineSpaceGroupNS=d(c$,"determineSpaceGroupNS",function(a,b){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,b.index)},"~S,JS.SpaceGroup");c$.determineSpaceGroupNA=d(c$,"determineSpaceGroupNA",function(a,b){return null==b?JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1):JS.SpaceGroup.determineSpaceGroup(a,b[0],b[1],b[2],b[3],b[4],b[5],-1)},"~S,~A");c$.determineSpaceGroup=d(c$,"determineSpaceGroup",function(a,
b,c,e,g,d,f,k){a=JS.SpaceGroup.determineSpaceGroupIndex(a,b,c,e,g,d,f,k);return 0<=a?JS.SpaceGroup.SG[a]:null},"~S,~N,~N,~N,~N,~N,~N,~N");c$.determineSpaceGroupIndex=d(c$,"determineSpaceGroupIndex",function(a,b,c,e,g,d,f,k){JS.SpaceGroup.getSpaceGroups();0>k&&(k=JS.SpaceGroup.SG.length);a=a.trim().toLowerCase();var l=!1;a.startsWith("bilbao:")&&(l=!0,a=a.substring(7));var j=a.startsWith("hall:")?5:a.startsWith("hm:")?3:0;0<j?a=a.substring(j):a.contains("[")&&(j=5,a=a.substring(0,a.indexOf("[")).trim());
var m=a,n,p=!1;a=a.$replace("_"," ");2<=a.length&&(n=0==a.indexOf("-")?2:1,n<a.length&&" "!=a.charAt(n)&&(a=a.substring(0,n)+" "+a.substring(n)),a=a.substring(0,2).toUpperCase()+a.substring(2));var q="";if(0<(n=a.indexOf(":")))q=a.substring(n+1),a=a.substring(0,n).trim(),p=!0;5!=j&&(!p&&JU.PT.isOneOf(a,JS.SpaceGroup.ambiguousNames))&&(q="?",p=!0);var r=JU.PT.replaceAllCharacters(a," ()",""),w;if(3!=j&&!p)for(n=k;0<=--n;)if(w=JS.SpaceGroup.SG[n],w.hallSymbol.equals(a))return n;if(5!=j){if(3!=j)for(n=
k;0<=--n;)if(w=JS.SpaceGroup.SG[n],w.intlTableNumberFull.equals(m))return n;for(n=k;0<=--n;)if(w=JS.SpaceGroup.SG[n],w.hmSymbolFull.equals(m))return n;for(n=k;0<=--n;)if(w=JS.SpaceGroup.SG[n],null!=w.hmSymbolAlternative&&w.hmSymbolAlternative.equals(m))return n;if(p)for(n=k;0<=--n;)if(w=JS.SpaceGroup.SG[n],w.hmSymbolAbbr.equals(r)&&w.intlTableNumberExt.equals(q))return n;if(p)for(n=k;0<=--n;)if(w=JS.SpaceGroup.SG[n],w.hmSymbolAbbrShort.equals(r)&&w.intlTableNumberExt.equals(q))return n;a=JS.SpaceGroup.determineUniqueAxis(b,
c,e,g,d,f);if(!p||"?"==q.charAt(0))for(n=k;0<=--n;)if(w=JS.SpaceGroup.SG[n],w.hmSymbolAbbr.equals(r)||w.hmSymbolAbbrShort.equals(r))switch(w.ambiguityType){case "\x00":return n;case "a":if(w.uniqueAxis==a||"\x00"==a)return n;break;case "o":if(0==q.length){if(w.hmSymbolExt.equals("2"))return n}else if(w.hmSymbolExt.equals(q))return n;break;case "t":if(0==q.length){if("h"==w.axisChoice)return n}else if((w.axisChoice+"").equals(q))return n}}if(0==q.length)for(n=0;n<k;n++)if(w=JS.SpaceGroup.SG[n],w.intlTableNumber.equals(m)&&
(!l||w.isBilbao))return n;return-1},"~S,~N,~N,~N,~N,~N,~N,~N");c$.determineUniqueAxis=d(c$,"determineUniqueAxis",function(a,b,c,e,g,d){return a==b?b==c?"\x00":"c":b==c?"a":c==a?"b":e==g?g==d?"\x00":"c":g==d?"a":d==e?"b":"\x00"},"~N,~N,~N,~N,~N,~N");d(c$,"buildSpaceGroup",function(a){a=JU.PT.split(a.toLowerCase(),";");this.isBilbao=5>a.length;this.intlTableNumberFull=a[0].trim();var b=JU.PT.split(this.intlTableNumberFull,":");this.intlTableNumber=b[0];this.intlTableNumberExt=1==b.length?"":b[1];this.ambiguityType=
"\x00";0<this.intlTableNumberExt.length&&(b=this.intlTableNumberExt,b.startsWith("-")&&(b=b.substring(1)),b.equals("h")||b.equals("r")?(this.ambiguityType="t",this.axisChoice=this.intlTableNumberExt.charAt(0)):this.intlTableNumberExt.startsWith("1")||this.intlTableNumberExt.startsWith("2")?this.ambiguityType="o":2>=this.intlTableNumberExt.length&&(this.ambiguityType="a",this.uniqueAxis=this.intlTableNumberExt.charAt(0)));this.hmSymbolFull=Character.toUpperCase(a[2].charAt(0))+a[2].substring(1);b=
JU.PT.split(this.hmSymbolFull,":");this.hmSymbol=b[0];this.hmSymbolExt=1==b.length?"":b[1];b=this.hmSymbol.indexOf(" -3");1<=b&&0<="admn".indexOf(this.hmSymbol.charAt(b-1))&&(this.hmSymbolAlternative=(this.hmSymbol.substring(0,b)+" 3"+this.hmSymbol.substring(b+3)).toLowerCase());this.hmSymbolAbbr=JU.PT.rep(this.hmSymbol," ","");this.hmSymbolAbbrShort=JU.PT.rep(this.hmSymbol," 1","");this.hmSymbolAbbrShort=JU.PT.rep(this.hmSymbolAbbrShort," ","");this.hallSymbol=a[3];1<this.hallSymbol.length&&(this.hallSymbol=
this.hallSymbol.substring(0,2).toUpperCase()+this.hallSymbol.substring(2));a=this.intlTableNumber+this.hallSymbol;"0"!=this.intlTableNumber.charAt(0)&&JS.SpaceGroup.lastInfo.equals(a)&&(JS.SpaceGroup.ambiguousNames+=this.hmSymbol+";");JS.SpaceGroup.lastInfo=a;this.name=this.hallSymbol+" ["+this.hmSymbolFull+"] #"+this.intlTableNumber},"~S");c$.getSpaceGroups=d(c$,"getSpaceGroups",function(){return null==JS.SpaceGroup.SG?JS.SpaceGroup.SG=JS.SpaceGroup.createSpaceGroups():JS.SpaceGroup.SG});c$.createSpaceGroups=
d(c$,"createSpaceGroups",function(){for(var a=JS.SpaceGroup.STR_SG.length,b=Array(a),c=0;c<a;c++)b[c]=new JS.SpaceGroup(JS.SpaceGroup.STR_SG[c],!0);JS.SpaceGroup.STR_SG=null;return b});d(c$,"addLatticeVectors",function(a){if(0<=this.latticeOp)return!1;for(var b=this.latticeOp=this.operationCount,c=0;c<a.size();c++){var e=a.get(c),g=p(5==e.length&&Float.isNaN(e[4])?e[3]:-2);-2!=g&&(e=[e[0],e[1],e[2]]);if(e.length>this.modDim+3)return!1;for(var d=0;d<b;d++){var f=new JS.SymmetryOperation(null,null,
0,0,this.doNormalize);f.modDim=this.modDim;var k=this.operations[d];f.linearRotTrans=JU.AU.arrayCopyF(k.linearRotTrans,-1);f.setFromMatrix(e,!1);f.xyzOriginal=f.xyz;-2!=g&&f.setTimeReversal(k.timeReversal*g);this.addOp(f,f.xyz,!0)}}return!0},"JU.Lst");d(c$,"getSiteMultiplicity",function(a,b){for(var c=this.finalOperations.length,e=new JU.Lst,g=c;0<=--g;){var d=JU.P3.newP(a);this.finalOperations[g].rotTrans(d);b.unitize(d);for(var f=e.size();0<=--f;){var k=e.get(f);if(1E-6>d.distanceSquared(k)){d=
null;break}}null!=d&&e.addLast(d)}return y(c/e.size())},"JU.P3,JS.UnitCell");d(c$,"getAllLatticeOps",function(){if(0>this.latticeOp||0<this.modDim)return null;if(null==this.latticeOps){this.latticeOps=V(3,0);for(var a=0,b=this.latticeOp;b<this.operationCount;b++){var c=this.finalOperations[b];3==c.m00+c.m01+c.m02&&(System.out.println("spacegroup "+c),this.latticeOps[a++]=b)}}return this.latticeOps});S(c$,"canonicalSeitzList",null,"NAME_HALL",5,"NAME_HM",3,"sgIndex",-1,"ambiguousNames","","lastInfo",
"","SG",null,"STR_SG",'1;c1^1;p 1;p 1,2;ci^1;p -1;-p 1,3:b;c2^1;p 1 2 1;p 2y,3:b;c2^1;p 2;p 2y,3:c;c2^1;p 1 1 2;p 2,3:a;c2^1;p 2 1 1;p 2x,4:b;c2^2;p 1 21 1;p 2yb,4:b;c2^2;p 21;p 2yb,4:b*;c2^2;p 1 21 1*;p 2y1,4:c;c2^2;p 1 1 21;p 2c,4:c*;c2^2;p 1 1 21*;p 21,4:a;c2^2;p 21 1 1;p 2xa,4:a*;c2^2;p 21 1 1*;p 2x1,5:b1;c2^3;c 1 2 1;c 2y,5:b1;c2^3;c 2;c 2y,5:b2;c2^3;a 1 2 1;a 2y,5:b3;c2^3;i 1 2 1;i 2y,5:c1;c2^3;a 1 1 2;a 2,5:c2;c2^3;b 1 1 2;b 2,5:c3;c2^3;i 1 1 2;i 2,5:a1;c2^3;b 2 1 1;b 2x,5:a2;c2^3;c 2 1 1;c 2x,5:a3;c2^3;i 2 1 1;i 2x,6:b;cs^1;p 1 m 1;p -2y,6:b;cs^1;p m;p -2y,6:c;cs^1;p 1 1 m;p -2,6:a;cs^1;p m 1 1;p -2x,7:b1;cs^2;p 1 c 1;p -2yc,7:b1;cs^2;p c;p -2yc,7:b2;cs^2;p 1 n 1;p -2yac,7:b2;cs^2;p n;p -2yac,7:b3;cs^2;p 1 a 1;p -2ya,7:b3;cs^2;p a;p -2ya,7:c1;cs^2;p 1 1 a;p -2a,7:c2;cs^2;p 1 1 n;p -2ab,7:c3;cs^2;p 1 1 b;p -2b,7:a1;cs^2;p b 1 1;p -2xb,7:a2;cs^2;p n 1 1;p -2xbc,7:a3;cs^2;p c 1 1;p -2xc,8:b1;cs^3;c 1 m 1;c -2y,8:b1;cs^3;c m;c -2y,8:b2;cs^3;a 1 m 1;a -2y,8:b3;cs^3;i 1 m 1;i -2y,8:b3;cs^3;i m;i -2y,8:c1;cs^3;a 1 1 m;a -2,8:c2;cs^3;b 1 1 m;b -2,8:c3;cs^3;i 1 1 m;i -2,8:a1;cs^3;b m 1 1;b -2x,8:a2;cs^3;c m 1 1;c -2x,8:a3;cs^3;i m 1 1;i -2x,9:b1;cs^4;c 1 c 1;c -2yc,9:b1;cs^4;c c;c -2yc,9:b2;cs^4;a 1 n 1;a -2yab,9:b3;cs^4;i 1 a 1;i -2ya,9:-b1;cs^4;a 1 a 1;a -2ya,9:-b2;cs^4;c 1 n 1;c -2yac,9:-b3;cs^4;i 1 c 1;i -2yc,9:c1;cs^4;a 1 1 a;a -2a,9:c2;cs^4;b 1 1 n;b -2ab,9:c3;cs^4;i 1 1 b;i -2b,9:-c1;cs^4;b 1 1 b;b -2b,9:-c2;cs^4;a 1 1 n;a -2ab,9:-c3;cs^4;i 1 1 a;i -2a,9:a1;cs^4;b b 1 1;b -2xb,9:a2;cs^4;c n 1 1;c -2xac,9:a3;cs^4;i c 1 1;i -2xc,9:-a1;cs^4;c c 1 1;c -2xc,9:-a2;cs^4;b n 1 1;b -2xab,9:-a3;cs^4;i b 1 1;i -2xb,10:b;c2h^1;p 1 2/m 1;-p 2y,10:b;c2h^1;p 2/m;-p 2y,10:c;c2h^1;p 1 1 2/m;-p 2,10:a;c2h^1;p 2/m 1 1;-p 2x,11:b;c2h^2;p 1 21/m 1;-p 2yb,11:b;c2h^2;p 21/m;-p 2yb,11:b*;c2h^2;p 1 21/m 1*;-p 2y1,11:c;c2h^2;p 1 1 21/m;-p 2c,11:c*;c2h^2;p 1 1 21/m*;-p 21,11:a;c2h^2;p 21/m 1 1;-p 2xa,11:a*;c2h^2;p 21/m 1 1*;-p 2x1,12:b1;c2h^3;c 1 2/m 1;-c 2y,12:b1;c2h^3;c 2/m;-c 2y,12:b2;c2h^3;a 1 2/m 1;-a 2y,12:b3;c2h^3;i 1 2/m 1;-i 2y,12:b3;c2h^3;i 2/m;-i 2y,12:c1;c2h^3;a 1 1 2/m;-a 2,12:c2;c2h^3;b 1 1 2/m;-b 2,12:c3;c2h^3;i 1 1 2/m;-i 2,12:a1;c2h^3;b 2/m 1 1;-b 2x,12:a2;c2h^3;c 2/m 1 1;-c 2x,12:a3;c2h^3;i 2/m 1 1;-i 2x,13:b1;c2h^4;p 1 2/c 1;-p 2yc,13:b1;c2h^4;p 2/c;-p 2yc,13:b2;c2h^4;p 1 2/n 1;-p 2yac,13:b2;c2h^4;p 2/n;-p 2yac,13:b3;c2h^4;p 1 2/a 1;-p 2ya,13:b3;c2h^4;p 2/a;-p 2ya,13:c1;c2h^4;p 1 1 2/a;-p 2a,13:c2;c2h^4;p 1 1 2/n;-p 2ab,13:c3;c2h^4;p 1 1 2/b;-p 2b,13:a1;c2h^4;p 2/b 1 1;-p 2xb,13:a2;c2h^4;p 2/n 1 1;-p 2xbc,13:a3;c2h^4;p 2/c 1 1;-p 2xc,14:b1;c2h^5;p 1 21/c 1;-p 2ybc,14:b1;c2h^5;p 21/c;-p 2ybc,14:b2;c2h^5;p 1 21/n 1;-p 2yn,14:b2;c2h^5;p 21/n;-p 2yn,14:b3;c2h^5;p 1 21/a 1;-p 2yab,14:b3;c2h^5;p 21/a;-p 2yab,14:c1;c2h^5;p 1 1 21/a;-p 2ac,14:c2;c2h^5;p 1 1 21/n;-p 2n,14:c3;c2h^5;p 1 1 21/b;-p 2bc,14:a1;c2h^5;p 21/b 1 1;-p 2xab,14:a2;c2h^5;p 21/n 1 1;-p 2xn,14:a3;c2h^5;p 21/c 1 1;-p 2xac,15:b1;c2h^6;c 1 2/c 1;-c 2yc,15:b1;c2h^6;c 2/c;-c 2yc,15:b2;c2h^6;a 1 2/n 1;-a 2yab,15:b3;c2h^6;i 1 2/a 1;-i 2ya,15:b3;c2h^6;i 2/a;-i 2ya,15:-b1;c2h^6;a 1 2/a 1;-a 2ya,15:-b2;c2h^6;c 1 2/n 1;-c 2yac,15:-b2;c2h^6;c 2/n;-c 2yac,15:-b3;c2h^6;i 1 2/c 1;-i 2yc,15:-b3;c2h^6;i 2/c;-i 2yc,15:c1;c2h^6;a 1 1 2/a;-a 2a,15:c2;c2h^6;b 1 1 2/n;-b 2ab,15:c3;c2h^6;i 1 1 2/b;-i 2b,15:-c1;c2h^6;b 1 1 2/b;-b 2b,15:-c2;c2h^6;a 1 1 2/n;-a 2ab,15:-c3;c2h^6;i 1 1 2/a;-i 2a,15:a1;c2h^6;b 2/b 1 1;-b 2xb,15:a2;c2h^6;c 2/n 1 1;-c 2xac,15:a3;c2h^6;i 2/c 1 1;-i 2xc,15:-a1;c2h^6;c 2/c 1 1;-c 2xc,15:-a2;c2h^6;b 2/n 1 1;-b 2xab,15:-a3;c2h^6;i 2/b 1 1;-i 2xb,16;d2^1;p 2 2 2;p 2 2,17;d2^2;p 2 2 21;p 2c 2,17*;d2^2;p 2 2 21*;p 21 2,17:cab;d2^2;p 21 2 2;p 2a 2a,17:bca;d2^2;p 2 21 2;p 2 2b,18;d2^3;p 21 21 2;p 2 2ab,18:cab;d2^3;p 2 21 21;p 2bc 2,18:bca;d2^3;p 21 2 21;p 2ac 2ac,19;d2^4;p 21 21 21;p 2ac 2ab,20;d2^5;c 2 2 21;c 2c 2,20*;d2^5;c 2 2 21*;c 21 2,20:cab;d2^5;a 21 2 2;a 2a 2a,20:cab*;d2^5;a 21 2 2*;a 2a 21,20:bca;d2^5;b 2 21 2;b 2 2b,21;d2^6;c 2 2 2;c 2 2,21:cab;d2^6;a 2 2 2;a 2 2,21:bca;d2^6;b 2 2 2;b 2 2,22;d2^7;f 2 2 2;f 2 2,23;d2^8;i 2 2 2;i 2 2,24;d2^9;i 21 21 21;i 2b 2c,25;c2v^1;p m m 2;p 2 -2,25:cab;c2v^1;p 2 m m;p -2 2,25:bca;c2v^1;p m 2 m;p -2 -2,26;c2v^2;p m c 21;p 2c -2,26*;c2v^2;p m c 21*;p 21 -2,26:ba-c;c2v^2;p c m 21;p 2c -2c,26:ba-c*;c2v^2;p c m 21*;p 21 -2c,26:cab;c2v^2;p 21 m a;p -2a 2a,26:-cba;c2v^2;p 21 a m;p -2 2a,26:bca;c2v^2;p b 21 m;p -2 -2b,26:a-cb;c2v^2;p m 21 b;p -2b -2,27;c2v^3;p c c 2;p 2 -2c,27:cab;c2v^3;p 2 a a;p -2a 2,27:bca;c2v^3;p b 2 b;p -2b -2b,28;c2v^4;p m a 2;p 2 -2a,28*;c2v^4;p m a 2*;p 2 -21,28:ba-c;c2v^4;p b m 2;p 2 -2b,28:cab;c2v^4;p 2 m b;p -2b 2,28:-cba;c2v^4;p 2 c m;p -2c 2,28:-cba*;c2v^4;p 2 c m*;p -21 2,28:bca;c2v^4;p c 2 m;p -2c -2c,28:a-cb;c2v^4;p m 2 a;p -2a -2a,29;c2v^5;p c a 21;p 2c -2ac,29:ba-c;c2v^5;p b c 21;p 2c -2b,29:cab;c2v^5;p 21 a b;p -2b 2a,29:-cba;c2v^5;p 21 c a;p -2ac 2a,29:bca;c2v^5;p c 21 b;p -2bc -2c,29:a-cb;c2v^5;p b 21 a;p -2a -2ab,30;c2v^6;p n c 2;p 2 -2bc,30:ba-c;c2v^6;p c n 2;p 2 -2ac,30:cab;c2v^6;p 2 n a;p -2ac 2,30:-cba;c2v^6;p 2 a n;p -2ab 2,30:bca;c2v^6;p b 2 n;p -2ab -2ab,30:a-cb;c2v^6;p n 2 b;p -2bc -2bc,31;c2v^7;p m n 21;p 2ac -2,31:ba-c;c2v^7;p n m 21;p 2bc -2bc,31:cab;c2v^7;p 21 m n;p -2ab 2ab,31:-cba;c2v^7;p 21 n m;p -2 2ac,31:bca;c2v^7;p n 21 m;p -2 -2bc,31:a-cb;c2v^7;p m 21 n;p -2ab -2,32;c2v^8;p b a 2;p 2 -2ab,32:cab;c2v^8;p 2 c b;p -2bc 2,32:bca;c2v^8;p c 2 a;p -2ac -2ac,33;c2v^9;p n a 21;p 2c -2n,33*;c2v^9;p n a 21*;p 21 -2n,33:ba-c;c2v^9;p b n 21;p 2c -2ab,33:ba-c*;c2v^9;p b n 21*;p 21 -2ab,33:cab;c2v^9;p 21 n b;p -2bc 2a,33:cab*;c2v^9;p 21 n b*;p -2bc 21,33:-cba;c2v^9;p 21 c n;p -2n 2a,33:-cba*;c2v^9;p 21 c n*;p -2n 21,33:bca;c2v^9;p c 21 n;p -2n -2ac,33:a-cb;c2v^9;p n 21 a;p -2ac -2n,34;c2v^10;p n n 2;p 2 -2n,34:cab;c2v^10;p 2 n n;p -2n 2,34:bca;c2v^10;p n 2 n;p -2n -2n,35;c2v^11;c m m 2;c 2 -2,35:cab;c2v^11;a 2 m m;a -2 2,35:bca;c2v^11;b m 2 m;b -2 -2,36;c2v^12;c m c 21;c 2c -2,36*;c2v^12;c m c 21*;c 21 -2,36:ba-c;c2v^12;c c m 21;c 2c -2c,36:ba-c*;c2v^12;c c m 21*;c 21 -2c,36:cab;c2v^12;a 21 m a;a -2a 2a,36:cab*;c2v^12;a 21 m a*;a -2a 21,36:-cba;c2v^12;a 21 a m;a -2 2a,36:-cba*;c2v^12;a 21 a m*;a -2 21,36:bca;c2v^12;b b 21 m;b -2 -2b,36:a-cb;c2v^12;b m 21 b;b -2b -2,37;c2v^13;c c c 2;c 2 -2c,37:cab;c2v^13;a 2 a a;a -2a 2,37:bca;c2v^13;b b 2 b;b -2b -2b,38;c2v^14;a m m 2;a 2 -2,38:ba-c;c2v^14;b m m 2;b 2 -2,38:cab;c2v^14;b 2 m m;b -2 2,38:-cba;c2v^14;c 2 m m;c -2 2,38:bca;c2v^14;c m 2 m;c -2 -2,38:a-cb;c2v^14;a m 2 m;a -2 -2,39;c2v^15;a e m 2;a 2 -2b,39;c2v^15;a b m 2;a 2 -2b,39:ba-c;c2v^15;b m a 2;b 2 -2a,39:cab;c2v^15;b 2 c m;b -2a 2,39:-cba;c2v^15;c 2 m b;c -2a 2,39:bca;c2v^15;c m 2 a;c -2a -2a,39:a-cb;c2v^15;a c 2 m;a -2b -2b,40;c2v^16;a m a 2;a 2 -2a,40:ba-c;c2v^16;b b m 2;b 2 -2b,40:cab;c2v^16;b 2 m b;b -2b 2,40:-cba;c2v^16;c 2 c m;c -2c 2,40:bca;c2v^16;c c 2 m;c -2c -2c,40:a-cb;c2v^16;a m 2 a;a -2a -2a,41;c2v^17;a e a 2;a 2 -2ab,41;c2v^17;a b a 2;a 2 -2ab;-b,41:ba-c;c2v^17;b b a 2;b 2 -2ab,41:cab;c2v^17;b 2 c b;b -2ab 2,41:-cba;c2v^17;c 2 c b;c -2ac 2,41:bca;c2v^17;c c 2 a;c -2ac -2ac,41:a-cb;c2v^17;a c 2 a;a -2ab -2ab,42;c2v^18;f m m 2;f 2 -2,42:cab;c2v^18;f 2 m m;f -2 2,42:bca;c2v^18;f m 2 m;f -2 -2,43;c2v^19;f d d 2;f 2 -2d,43:cab;c2v^19;f 2 d d;f -2d 2,43:bca;c2v^19;f d 2 d;f -2d -2d,44;c2v^20;i m m 2;i 2 -2,44:cab;c2v^20;i 2 m m;i -2 2,44:bca;c2v^20;i m 2 m;i -2 -2,45;c2v^21;i b a 2;i 2 -2c,45:cab;c2v^21;i 2 c b;i -2a 2,45:bca;c2v^21;i c 2 a;i -2b -2b,46;c2v^22;i m a 2;i 2 -2a,46:ba-c;c2v^22;i b m 2;i 2 -2b,46:cab;c2v^22;i 2 m b;i -2b 2,46:-cba;c2v^22;i 2 c m;i -2c 2,46:bca;c2v^22;i c 2 m;i -2c -2c,46:a-cb;c2v^22;i m 2 a;i -2a -2a,47;d2h^1;p m m m;-p 2 2,48:1;d2h^2;p n n n:1;p 2 2 -1n;-b,48:2;d2h^2;p n n n:2;-p 2ab 2bc,49;d2h^3;p c c m;-p 2 2c,49:cab;d2h^3;p m a a;-p 2a 2,49:bca;d2h^3;p b m b;-p 2b 2b,50:1;d2h^4;p b a n:1;p 2 2 -1ab;-b,50:2;d2h^4;p b a n:2;-p 2ab 2b,50:1cab;d2h^4;p n c b:1;p 2 2 -1bc,50:2cab;d2h^4;p n c b:2;-p 2b 2bc,50:1bca;d2h^4;p c n a:1;p 2 2 -1ac,50:2bca;d2h^4;p c n a:2;-p 2a 2c,51;d2h^5;p m m a;-p 2a 2a,51:ba-c;d2h^5;p m m b;-p 2b 2,51:cab;d2h^5;p b m m;-p 2 2b,51:-cba;d2h^5;p c m m;-p 2c 2c,51:bca;d2h^5;p m c m;-p 2c 2,51:a-cb;d2h^5;p m a m;-p 2 2a,52;d2h^6;p n n a;-p 2a 2bc,52:ba-c;d2h^6;p n n b;-p 2b 2n,52:cab;d2h^6;p b n n;-p 2n 2b,52:-cba;d2h^6;p c n n;-p 2ab 2c,52:bca;d2h^6;p n c n;-p 2ab 2n,52:a-cb;d2h^6;p n a n;-p 2n 2bc,53;d2h^7;p m n a;-p 2ac 2,53:ba-c;d2h^7;p n m b;-p 2bc 2bc,53:cab;d2h^7;p b m n;-p 2ab 2ab,53:-cba;d2h^7;p c n m;-p 2 2ac,53:bca;d2h^7;p n c m;-p 2 2bc,53:a-cb;d2h^7;p m a n;-p 2ab 2,54;d2h^8;p c c a;-p 2a 2ac,54:ba-c;d2h^8;p c c b;-p 2b 2c,54:cab;d2h^8;p b a a;-p 2a 2b,54:-cba;d2h^8;p c a a;-p 2ac 2c,54:bca;d2h^8;p b c b;-p 2bc 2b,54:a-cb;d2h^8;p b a b;-p 2b 2ab,55;d2h^9;p b a m;-p 2 2ab,55:cab;d2h^9;p m c b;-p 2bc 2,55:bca;d2h^9;p c m a;-p 2ac 2ac,56;d2h^10;p c c n;-p 2ab 2ac,56:cab;d2h^10;p n a a;-p 2ac 2bc,56:bca;d2h^10;p b n b;-p 2bc 2ab,57;d2h^11;p b c m;-p 2c 2b,57:ba-c;d2h^11;p c a m;-p 2c 2ac,57:cab;d2h^11;p m c a;-p 2ac 2a,57:-cba;d2h^11;p m a b;-p 2b 2a,57:bca;d2h^11;p b m a;-p 2a 2ab,57:a-cb;d2h^11;p c m b;-p 2bc 2c,58;d2h^12;p n n m;-p 2 2n,58:cab;d2h^12;p m n n;-p 2n 2,58:bca;d2h^12;p n m n;-p 2n 2n,59:1;d2h^13;p m m n:1;p 2 2ab -1ab;-b,59:2;d2h^13;p m m n:2;-p 2ab 2a,59:1cab;d2h^13;p n m m:1;p 2bc 2 -1bc,59:2cab;d2h^13;p n m m:2;-p 2c 2bc,59:1bca;d2h^13;p m n m:1;p 2ac 2ac -1ac,59:2bca;d2h^13;p m n m:2;-p 2c 2a,60;d2h^14;p b c n;-p 2n 2ab,60:ba-c;d2h^14;p c a n;-p 2n 2c,60:cab;d2h^14;p n c a;-p 2a 2n,60:-cba;d2h^14;p n a b;-p 2bc 2n,60:bca;d2h^14;p b n a;-p 2ac 2b,60:a-cb;d2h^14;p c n b;-p 2b 2ac,61;d2h^15;p b c a;-p 2ac 2ab,61:ba-c;d2h^15;p c a b;-p 2bc 2ac,62;d2h^16;p n m a;-p 2ac 2n,62:ba-c;d2h^16;p m n b;-p 2bc 2a,62:cab;d2h^16;p b n m;-p 2c 2ab,62:-cba;d2h^16;p c m n;-p 2n 2ac,62:bca;d2h^16;p m c n;-p 2n 2a,62:a-cb;d2h^16;p n a m;-p 2c 2n,63;d2h^17;c m c m;-c 2c 2,63:ba-c;d2h^17;c c m m;-c 2c 2c,63:cab;d2h^17;a m m a;-a 2a 2a,63:-cba;d2h^17;a m a m;-a 2 2a,63:bca;d2h^17;b b m m;-b 2 2b,63:a-cb;d2h^17;b m m b;-b 2b 2,64;d2h^18;c m c e;-c 2ac 2,64;d2h^18;c m c a;-c 2ac 2,64:ba-c;d2h^18;c c m b;-c 2ac 2ac,64:cab;d2h^18;a b m a;-a 2ab 2ab,64:-cba;d2h^18;a c a m;-a 2 2ab,64:bca;d2h^18;b b c m;-b 2 2ab,64:a-cb;d2h^18;b m a b;-b 2ab 2,65;d2h^19;c m m m;-c 2 2,65:cab;d2h^19;a m m m;-a 2 2,65:bca;d2h^19;b m m m;-b 2 2,66;d2h^20;c c c m;-c 2 2c,66:cab;d2h^20;a m a a;-a 2a 2,66:bca;d2h^20;b b m b;-b 2b 2b,67;d2h^21;c m m e;-c 2a 2,67;d2h^21;c m m a;-c 2a 2,67:ba-c;d2h^21;c m m b;-c 2a 2a,67:cab;d2h^21;a b m m;-a 2b 2b,67:-cba;d2h^21;a c m m;-a 2 2b,67:bca;d2h^21;b m c m;-b 2 2a,67:a-cb;d2h^21;b m a m;-b 2a 2,68:1;d2h^22;c c c e:1;c 2 2 -1ac;-b,68:1;d2h^22;c c c a:1;c 2 2 -1ac;-b,68:2;d2h^22;c c c e:2;-c 2a 2ac,68:2;d2h^22;c c c a:2;-c 2a 2ac,68:1ba-c;d2h^22;c c c b:1;c 2 2 -1ac,68:2ba-c;d2h^22;c c c b:2;-c 2a 2c,68:1cab;d2h^22;a b a a:1;a 2 2 -1ab,68:2cab;d2h^22;a b a a:2;-a 2a 2b,68:1-cba;d2h^22;a c a a:1;a 2 2 -1ab,68:2-cba;d2h^22;a c a a:2;-a 2ab 2b,68:1bca;d2h^22;b b c b:1;b 2 2 -1ab,68:2bca;d2h^22;b b c b:2;-b 2ab 2b,68:1a-cb;d2h^22;b b a b:1;b 2 2 -1ab,68:2a-cb;d2h^22;b b a b:2;-b 2b 2ab,69;d2h^23;f m m m;-f 2 2,70:1;d2h^24;f d d d:1;f 2 2 -1d;-b,70:2;d2h^24;f d d d:2;-f 2uv 2vw,71;d2h^25;i m m m;-i 2 2,72;d2h^26;i b a m;-i 2 2c,72:cab;d2h^26;i m c b;-i 2a 2,72:bca;d2h^26;i c m a;-i 2b 2b,73;d2h^27;i b c a;-i 2b 2c,73:ba-c;d2h^27;i c a b;-i 2a 2b,74;d2h^28;i m m a;-i 2b 2,74:ba-c;d2h^28;i m m b;-i 2a 2a,74:cab;d2h^28;i b m m;-i 2c 2c,74:-cba;d2h^28;i c m m;-i 2 2b,74:bca;d2h^28;i m c m;-i 2 2a,74:a-cb;d2h^28;i m a m;-i 2c 2,75;c4^1;p 4;p 4,76;c4^2;p 41;p 4w,76*;c4^2;p 41*;p 41,77;c4^3;p 42;p 4c,77*;c4^3;p 42*;p 42,78;c4^4;p 43;p 4cw,78*;c4^4;p 43*;p 43,79;c4^5;i 4;i 4,80;c4^6;i 41;i 4bw,81;s4^1;p -4;p -4,82;s4^2;i -4;i -4,83;c4h^1;p 4/m;-p 4,84;c4h^2;p 42/m;-p 4c,84*;c4h^2;p 42/m*;-p 42,85:1;c4h^3;p 4/n:1;p 4ab -1ab;-b,85:2;c4h^3;p 4/n:2;-p 4a,86:1;c4h^4;p 42/n:1;p 4n -1n;-b,86:2;c4h^4;p 42/n:2;-p 4bc,87;c4h^5;i 4/m;-i 4,88:1;c4h^6;i 41/a:1;i 4bw -1bw;-b,88:2;c4h^6;i 41/a:2;-i 4ad,89;d4^1;p 4 2 2;p 4 2,90;d4^2;p 4 21 2;p 4ab 2ab,91;d4^3;p 41 2 2;p 4w 2c,91*;d4^3;p 41 2 2*;p 41 2c,92;d4^4;p 41 21 2;p 4abw 2nw,93;d4^5;p 42 2 2;p 4c 2,93*;d4^5;p 42 2 2*;p 42 2,94;d4^6;p 42 21 2;p 4n 2n,95;d4^7;p 43 2 2;p 4cw 2c,95*;d4^7;p 43 2 2*;p 43 2c,96;d4^8;p 43 21 2;p 4nw 2abw,97;d4^9;i 4 2 2;i 4 2,98;d4^10;i 41 2 2;i 4bw 2bw,99;c4v^1;p 4 m m;p 4 -2,100;c4v^2;p 4 b m;p 4 -2ab,101;c4v^3;p 42 c m;p 4c -2c,101*;c4v^3;p 42 c m*;p 42 -2c,102;c4v^4;p 42 n m;p 4n -2n,103;c4v^5;p 4 c c;p 4 -2c,104;c4v^6;p 4 n c;p 4 -2n,105;c4v^7;p 42 m c;p 4c -2,105*;c4v^7;p 42 m c*;p 42 -2,106;c4v^8;p 42 b c;p 4c -2ab,106*;c4v^8;p 42 b c*;p 42 -2ab,107;c4v^9;i 4 m m;i 4 -2,108;c4v^10;i 4 c m;i 4 -2c,109;c4v^11;i 41 m d;i 4bw -2,110;c4v^12;i 41 c d;i 4bw -2c,111;d2d^1;p -4 2 m;p -4 2,112;d2d^2;p -4 2 c;p -4 2c,113;d2d^3;p -4 21 m;p -4 2ab,114;d2d^4;p -4 21 c;p -4 2n,115;d2d^5;p -4 m 2;p -4 -2,116;d2d^6;p -4 c 2;p -4 -2c,117;d2d^7;p -4 b 2;p -4 -2ab,118;d2d^8;p -4 n 2;p -4 -2n,119;d2d^9;i -4 m 2;i -4 -2,120;d2d^10;i -4 c 2;i -4 -2c,121;d2d^11;i -4 2 m;i -4 2,122;d2d^12;i -4 2 d;i -4 2bw,123;d4h^1;p 4/m m m;-p 4 2,124;d4h^2;p 4/m c c;-p 4 2c,125:1;d4h^3;p 4/n b m:1;p 4 2 -1ab;-b,125:2;d4h^3;p 4/n b m:2;-p 4a 2b,126:1;d4h^4;p 4/n n c:1;p 4 2 -1n;-b,126:2;d4h^4;p 4/n n c:2;-p 4a 2bc,127;d4h^5;p 4/m b m;-p 4 2ab,128;d4h^6;p 4/m n c;-p 4 2n,129:1;d4h^7;p 4/n m m:1;p 4ab 2ab -1ab;-b,129:2;d4h^7;p 4/n m m:2;-p 4a 2a,130:1;d4h^8;p 4/n c c:1;p 4ab 2n -1ab;-b,130:2;d4h^8;p 4/n c c:2;-p 4a 2ac,131;d4h^9;p 42/m m c;-p 4c 2,132;d4h^10;p 42/m c m;-p 4c 2c,133:1;d4h^11;p 42/n b c:1;p 4n 2c -1n;-b,133:2;d4h^11;p 42/n b c:2;-p 4ac 2b,134:1;d4h^12;p 42/n n m:1;p 4n 2 -1n;-b,134:2;d4h^12;p 42/n n m:2;-p 4ac 2bc,135;d4h^13;p 42/m b c;-p 4c 2ab,135*;d4h^13;p 42/m b c*;-p 42 2ab,136;d4h^14;p 42/m n m;-p 4n 2n,137:1;d4h^15;p 42/n m c:1;p 4n 2n -1n;-b,137:2;d4h^15;p 42/n m c:2;-p 4ac 2a,138:1;d4h^16;p 42/n c m:1;p 4n 2ab -1n;-b,138:2;d4h^16;p 42/n c m:2;-p 4ac 2ac,139;d4h^17;i 4/m m m;-i 4 2,140;d4h^18;i 4/m c m;-i 4 2c,141:1;d4h^19;i 41/a m d:1;i 4bw 2bw -1bw;-b,141:2;d4h^19;i 41/a m d:2;-i 4bd 2,142:1;d4h^20;i 41/a c d:1;i 4bw 2aw -1bw;-b,142:2;d4h^20;i 41/a c d:2;-i 4bd 2c,143;c3^1;p 3;p 3,144;c3^2;p 31;p 31,145;c3^3;p 32;p 32,146:h;c3^4;r 3:h;r 3,146:r;c3^4;r 3:r;p 3*,147;c3i^1;p -3;-p 3,148:h;c3i^2;r -3:h;-r 3,148:r;c3i^2;r -3:r;-p 3*,149;d3^1;p 3 1 2;p 3 2,150;d3^2;p 3 2 1;p 3 2",151;d3^3;p 31 1 2;p 31 2 (0 0 4),152;d3^4;p 31 2 1;p 31 2",153;d3^5;p 32 1 2;p 32 2 (0 0 2),154;d3^6;p 32 2 1;p 32 2",155:h;d3^7;r 3 2:h;r 3 2",155:r;d3^7;r 3 2:r;p 3* 2,156;c3v^1;p 3 m 1;p 3 -2",157;c3v^2;p 3 1 m;p 3 -2,158;c3v^3;p 3 c 1;p 3 -2"c,159;c3v^4;p 3 1 c;p 3 -2c,160:h;c3v^5;r 3 m:h;r 3 -2",160:r;c3v^5;r 3 m:r;p 3* -2,161:h;c3v^6;r 3 c:h;r 3 -2"c,161:r;c3v^6;r 3 c:r;p 3* -2n,162;d3d^1;p -3 1 m;-p 3 2,163;d3d^2;p -3 1 c;-p 3 2c,164;d3d^3;p -3 m 1;-p 3 2",165;d3d^4;p -3 c 1;-p 3 2"c,166:h;d3d^5;r -3 m:h;-r 3 2",166:r;d3d^5;r -3 m:r;-p 3* 2,167:h;d3d^6;r -3 c:h;-r 3 2"c,167:r;d3d^6;r -3 c:r;-p 3* 2n,168;c6^1;p 6;p 6,169;c6^2;p 61;p 61,170;c6^3;p 65;p 65,171;c6^4;p 62;p 62,172;c6^5;p 64;p 64,173;c6^6;p 63;p 6c,173*;c6^6;p 63*;p 63 ,174;c3h^1;p -6;p -6,175;c6h^1;p 6/m;-p 6,176;c6h^2;p 63/m;-p 6c,176*;c6h^2;p 63/m*;-p 63,177;d6^1;p 6 2 2;p 6 2,178;d6^2;p 61 2 2;p 61 2 (0 0 5),179;d6^3;p 65 2 2;p 65 2 (0 0 1),180;d6^4;p 62 2 2;p 62 2 (0 0 4),181;d6^5;p 64 2 2;p 64 2 (0 0 2),182;d6^6;p 63 2 2;p 6c 2c,182*;d6^6;p 63 2 2*;p 63 2c,183;c6v^1;p 6 m m;p 6 -2,184;c6v^2;p 6 c c;p 6 -2c,185;c6v^3;p 63 c m;p 6c -2,185*;c6v^3;p 63 c m*;p 63 -2,186;c6v^4;p 63 m c;p 6c -2c,186*;c6v^4;p 63 m c*;p 63 -2c,187;d3h^1;p -6 m 2;p -6 2,188;d3h^2;p -6 c 2;p -6c 2,189;d3h^3;p -6 2 m;p -6 -2,190;d3h^4;p -6 2 c;p -6c -2c,191;d6h^1;p 6/m m m;-p 6 2,192;d6h^2;p 6/m c c;-p 6 2c,193;d6h^3;p 63/m c m;-p 6c 2,193*;d6h^3;p 63/m c m*;-p 63 2,194;d6h^4;p 63/m m c;-p 6c 2c,194*;d6h^4;p 63/m m c*;-p 63 2c,195;t^1;p 2 3;p 2 2 3,196;t^2;f 2 3;f 2 2 3,197;t^3;i 2 3;i 2 2 3,198;t^4;p 21 3;p 2ac 2ab 3,199;t^5;i 21 3;i 2b 2c 3,200;th^1;p m -3;-p 2 2 3,201:1;th^2;p n -3:1;p 2 2 3 -1n;-b,201:2;th^2;p n -3:2;-p 2ab 2bc 3,202;th^3;f m -3;-f 2 2 3,203:1;th^4;f d -3:1;f 2 2 3 -1d;-b,203:2;th^4;f d -3:2;-f 2uv 2vw 3,204;th^5;i m -3;-i 2 2 3,205;th^6;p a -3;-p 2ac 2ab 3,206;th^7;i a -3;-i 2b 2c 3,207;o^1;p 4 3 2;p 4 2 3,208;o^2;p 42 3 2;p 4n 2 3,209;o^3;f 4 3 2;f 4 2 3,210;o^4;f 41 3 2;f 4d 2 3,211;o^5;i 4 3 2;i 4 2 3,212;o^6;p 43 3 2;p 4acd 2ab 3,213;o^7;p 41 3 2;p 4bd 2ab 3,214;o^8;i 41 3 2;i 4bd 2c 3,215;td^1;p -4 3 m;p -4 2 3,216;td^2;f -4 3 m;f -4 2 3,217;td^3;i -4 3 m;i -4 2 3,218;td^4;p -4 3 n;p -4n 2 3,219;td^5;f -4 3 c;f -4a 2 3,220;td^6;i -4 3 d;i -4bd 2c 3,221;oh^1;p m -3 m;-p 4 2 3,222:1;oh^2;p n -3 n:1;p 4 2 3 -1n;-b,222:2;oh^2;p n -3 n:2;-p 4a 2bc 3,223;oh^3;p m -3 n;-p 4n 2 3,224:1;oh^4;p n -3 m:1;p 4n 2 3 -1n;-b,224:2;oh^4;p n -3 m:2;-p 4bc 2bc 3,225;oh^5;f m -3 m;-f 4 2 3,226;oh^6;f m -3 c;-f 4a 2 3,227:1;oh^7;f d -3 m:1;f 4d 2 3 -1d;-b,227:2;oh^7;f d -3 m:2;-f 4vw 2vw 3,228:1;oh^8;f d -3 c:1;f 4d 2 3 -1ad;-b,228:2;oh^8;f d -3 c:2;-f 4ud 2vw 3,229;oh^9;i m -3 m;-i 4 2 3,230;oh^10;i a -3 d;-i 4bd 2c 3'.split(","))});
H("JS");R(null,"JS.HallInfo",["JU.P3i","$.SB","JS.HallRotationTerm","$.HallTranslation","JU.Logger"],function(){c$=Q(function(){this.primitiveHallSymbol=this.hallSymbol=null;this.latticeCode="\x00";this.latticeExtension=null;this.isCentrosymmetric=!1;this.nRotations=0;this.vectorCode=this.vector12ths=this.rotationTerms=null;K(this,arguments)},JS,"HallInfo");W(c$,function(){this.rotationTerms=Array(16)});D(c$,function(a){try{var b=this.hallSymbol=a.trim(),b=this.extractLatticeInfo(b);if(0!=JS.HallTranslation.getLatticeIndex(this.latticeCode)){this.latticeExtension=
JS.HallTranslation.getLatticeExtension(this.latticeCode,this.isCentrosymmetric);b=this.extractVectorInfo(b)+this.latticeExtension;JU.Logger.debugging&&JU.Logger.debug("Hallinfo: "+a+" "+b);a=0;var c="\x00";for(this.primitiveHallSymbol="P";0<b.length&&16>this.nRotations;){var b=this.extractRotationInfo(b,a,c),e=this.rotationTerms[this.nRotations-1];a=e.order;c=e.axisType;this.primitiveHallSymbol+=" "+e.primitiveCode}this.primitiveHallSymbol+=this.vectorCode}}catch(g){if(Y(g,Exception))JU.Logger.error("Invalid Hall symbol "+
g),this.nRotations=0;else throw g;}},"~S");d(c$,"dumpInfo",function(){var a=new JU.SB;a.append("\nHall symbol: ").append(this.hallSymbol).append("\nprimitive Hall symbol: ").append(this.primitiveHallSymbol).append("\nlattice type: ").append(this.getLatticeDesignation());for(var b=0;b<this.nRotations;b++)a.append("\n\nrotation term ").appendI(b+1).append(this.rotationTerms[b].dumpInfo(this.vectorCode));return a.toString()});d(c$,"getLatticeDesignation",function(){return JS.HallTranslation.getLatticeDesignation2(this.latticeCode,
this.isCentrosymmetric)});d(c$,"extractLatticeInfo",function(a){var b=a.indexOf(" ");if(0>b)return"";var c=a.substring(0,b).toUpperCase();this.latticeCode=c.charAt(0);"-"==this.latticeCode&&(this.isCentrosymmetric=!0,this.latticeCode=c.charAt(1));return a.substring(b+1).trim()},"~S");d(c$,"extractVectorInfo",function(a){this.vector12ths=new JU.P3i;this.vectorCode="";var b=a.indexOf("("),c=a.indexOf(")",b);0<b&&c>b&&(c=a.substring(b+1,c),this.vectorCode=" ("+c+")",a=a.substring(0,b).trim(),b=c.indexOf(" "),
0<=b&&(this.vector12ths.x=Integer.parseInt(c.substring(0,b)),c=c.substring(b+1).trim(),b=c.indexOf(" "),0<=b&&(this.vector12ths.y=Integer.parseInt(c.substring(0,b)),c=c.substring(b+1).trim())),this.vector12ths.z=Integer.parseInt(c));return a},"~S");d(c$,"extractRotationInfo",function(a,b,c){var e=a.indexOf(" "),g;0<=e?(g=a.substring(0,e),a=a.substring(e+1).trim()):(g=a,a="");this.rotationTerms[this.nRotations]=new JS.HallRotationTerm(this,g,b,c);this.nRotations++;return a},"~S,~N,~S")});H("JS");R(["JU.M4"],
"JS.HallRotationTerm",["JU.SB","JS.HallRotation","$.HallTranslation","$.SymmetryOperation","JU.Logger"],function(){c$=Q(function(){this.seitzMatrix12ths=this.translation=this.rotation=this.translationString=this.lookupCode=this.primitiveCode=this.inputCode=null;this.isImproper=!1;this.order=0;this.diagonalReferenceAxis=this.axisType="\x00";this.allPositive=!0;K(this,arguments)},JS,"HallRotationTerm");W(c$,function(){this.seitzMatrix12ths=new JU.M4});D(c$,function(a,b,c,e){this.inputCode=b;b+="   ";
"-"==b.charAt(0)&&(this.isImproper=!0,b=b.substring(1));this.primitiveCode="";this.order=b.charCodeAt(0)-48;this.axisType=this.diagonalReferenceAxis="\x00";var g=2,d;switch(d=b.charAt(1)){case "x":case "y":case "z":switch(b.charAt(2)){case "'":case '"':this.diagonalReferenceAxis=d,d=b.charAt(2),g++}case "*":this.axisType=d;break;case "'":case '"':this.axisType=d;switch(b.charAt(2)){case "x":case "y":case "z":this.diagonalReferenceAxis=b.charAt(2);g++;break;default:this.diagonalReferenceAxis=e}break;
default:this.axisType=1==this.order?"_":0==a.nRotations?"z":2==a.nRotations?"*":2==c||4==c?"x":"'",b=b.substring(0,1)+this.axisType+b.substring(1)}this.primitiveCode+="_"==this.axisType?"1":b.substring(0,2);"\x00"!=this.diagonalReferenceAxis&&(b=b.substring(0,1)+this.diagonalReferenceAxis+this.axisType+b.substring(g),this.primitiveCode+=this.diagonalReferenceAxis,g=3);this.lookupCode=b.substring(0,g);this.rotation=JS.HallRotation.lookup(this.lookupCode);if(null==this.rotation)JU.Logger.error("Rotation lookup could not find "+
this.inputCode+" ? "+this.lookupCode);else{this.translation=new JS.HallTranslation("\x00",null);this.translationString="";for(c=b.length;g<c;g++)e=b.charAt(g),e=JS.HallTranslation.getHallTranslation(e,this.order),null!=e&&(this.translationString+=""+e.translationCode,this.translation.rotationShift12ths+=e.rotationShift12ths,this.translation.vectorShift12ths.add(e.vectorShift12ths));this.primitiveCode=(this.isImproper?"-":"")+this.primitiveCode+this.translationString;this.isImproper?this.seitzMatrix12ths.setM4(this.rotation.seitzMatrixInv):
this.seitzMatrix12ths.setM4(this.rotation.seitzMatrix);this.seitzMatrix12ths.m03=this.translation.vectorShift12ths.x;this.seitzMatrix12ths.m13=this.translation.vectorShift12ths.y;this.seitzMatrix12ths.m23=this.translation.vectorShift12ths.z;switch(this.axisType){case "x":this.seitzMatrix12ths.m03+=this.translation.rotationShift12ths;break;case "y":this.seitzMatrix12ths.m13+=this.translation.rotationShift12ths;break;case "z":this.seitzMatrix12ths.m23+=this.translation.rotationShift12ths}0<a.vectorCode.length&&
(g=JU.M4.newM4(null),c=JU.M4.newM4(null),a=a.vector12ths,g.m03=a.x,g.m13=a.y,g.m23=a.z,c.m03=-a.x,c.m13=-a.y,c.m23=-a.z,this.seitzMatrix12ths.mul2(g,this.seitzMatrix12ths),this.seitzMatrix12ths.mul(c));JU.Logger.debugging&&JU.Logger.debug("code = "+b+"; primitive code ="+this.primitiveCode+"\n Seitz Matrix(12ths):"+this.seitzMatrix12ths)}},"JS.HallInfo,~S,~N,~S");d(c$,"dumpInfo",function(a){var b=new JU.SB;b.append("\ninput code: ").append(this.inputCode).append("; primitive code: ").append(this.primitiveCode).append("\norder: ").appendI(this.order).append(this.isImproper?
" (improper axis)":"");"_"!=this.axisType&&(b.append("; axisType: ").appendC(this.axisType),"\x00"!=this.diagonalReferenceAxis&&b.appendC(this.diagonalReferenceAxis));0<this.translationString.length&&b.append("; translation: ").append(this.translationString);0<a.length&&b.append("; vector offset: ").append(a);null!=this.rotation&&b.append("\noperator: ").append(this.getXYZ(this.allPositive)).append("\nSeitz matrix:\n").append(JS.SymmetryOperation.dumpSeitz(this.seitzMatrix12ths));return b.toString()},
"~S");d(c$,"getXYZ",function(a){return JS.SymmetryOperation.getXYZFromMatrix(this.seitzMatrix12ths,!0,a,!0)},"~B")});H("JS");R(["JU.M4"],"JS.HallRotation",null,function(){c$=Q(function(){this.seitzMatrixInv=this.seitzMatrix=this.rotCode=null;K(this,arguments)},JS,"HallRotation");W(c$,function(){this.seitzMatrix=new JU.M4;this.seitzMatrixInv=new JU.M4});D(c$,function(a,b){this.rotCode=a;var c=T(16,0),e=T(16,0);c[15]=e[15]=1;for(var g=0,d=0;11>d;g++){var f=0;switch(b.charAt(g)){case " ":d++;continue;
case "+":case "1":f=1;break;case "-":f=-1}c[d]=f;e[d]=-f;d++}this.seitzMatrix.setA(c);this.seitzMatrixInv.setA(e)},"~S,~S");c$.lookup=d(c$,"lookup",function(a){for(var b=JS.HallRotation.getHallTerms().length;0<=--b;)if(JS.HallRotation.hallRotationTerms[b].rotCode.equals(a))return JS.HallRotation.hallRotationTerms[b];return null},"~S");c$.getHallTerms=d(c$,"getHallTerms",function(){return null==JS.HallRotation.hallRotationTerms?JS.HallRotation.hallRotationTerms=[new JS.HallRotation("1_","+00 0+0 00+"),
new JS.HallRotation("2x","+00 0-0 00-"),new JS.HallRotation("2y","-00 0+0 00-"),new JS.HallRotation("2z","-00 0-0 00+"),new JS.HallRotation("2'","0-0 -00 00-"),new JS.HallRotation('2"',"0+0 +00 00-"),new JS.HallRotation("2x'","-00 00- 0-0"),new JS.HallRotation('2x"',"-00 00+ 0+0"),new JS.HallRotation("2y'","00- 0-0 -00"),new JS.HallRotation('2y"',"00+ 0-0 +00"),new JS.HallRotation("2z'","0-0 -00 00-"),new JS.HallRotation('2z"',"0+0 +00 00-"),new JS.HallRotation("3x","+00 00- 0+-"),new JS.HallRotation("3y",
"-0+ 0+0 -00"),new JS.HallRotation("3z","0-0 +-0 00+"),new JS.HallRotation("3*","00+ +00 0+0"),new JS.HallRotation("4x","+00 00- 0+0"),new JS.HallRotation("4y","00+ 0+0 -00"),new JS.HallRotation("4z","0-0 +00 00+"),new JS.HallRotation("6x","+00 0+- 0+0"),new JS.HallRotation("6y","00+ 0+0 -0+"),new JS.HallRotation("6z","+-0 +00 00+")]:JS.HallRotation.hallRotationTerms});S(c$,"hallRotationTerms",null)});H("JS");R(null,"JS.HallTranslation",["JU.P3i"],function(){c$=Q(function(){this.translationCode="\x00";
this.rotationShift12ths=this.rotationOrder=0;this.vectorShift12ths=null;K(this,arguments)},JS,"HallTranslation");D(c$,function(a,b){this.translationCode=a;if(null!=b){if(0<=b.z){this.vectorShift12ths=b;return}this.rotationOrder=b.x;this.rotationShift12ths=b.y}this.vectorShift12ths=new JU.P3i},"~S,JU.P3i");c$.getHallLatticeEquivalent=d(c$,"getHallLatticeEquivalent",function(a){var b=JS.HallTranslation.getLatticeCode(a);return(0<a?"-":"")+b+" 1"},"~N");c$.getLatticeIndex=d(c$,"getLatticeIndex",function(a){for(var b=
1,c=3;b<=JS.HallTranslation.nLatticeTypes;b++,c+=3)if(JS.HallTranslation.latticeTranslationData[c].charAt(0)==a)return b;return 0},"~S");c$.getLatticeCode=d(c$,"getLatticeCode",function(a){0>a&&(a=-a);return 0==a?"\x00":a>JS.HallTranslation.nLatticeTypes?JS.HallTranslation.getLatticeCode(JS.HallTranslation.getLatticeIndex(String.fromCharCode(a))):JS.HallTranslation.latticeTranslationData[3*a].charAt(0)},"~N");c$.getLatticeDesignation=d(c$,"getLatticeDesignation",function(a){var b=0<a;0>a&&(a=-a);
return 0==a||a>JS.HallTranslation.nLatticeTypes?"":(b?"-":"")+JS.HallTranslation.getLatticeCode(a)+": "+(b?"centrosymmetric ":"")+JS.HallTranslation.latticeTranslationData[3*a+1]},"~N");c$.getLatticeDesignation2=d(c$,"getLatticeDesignation2",function(a,b){var c=JS.HallTranslation.getLatticeIndex(a);b||(c=-c);return JS.HallTranslation.getLatticeDesignation(c)},"~S,~B");c$.getLatticeExtension=d(c$,"getLatticeExtension",function(a,b){for(var c=1,e=3;c<=JS.HallTranslation.nLatticeTypes;c++,e+=3)if(JS.HallTranslation.latticeTranslationData[e].charAt(0)==
a)return JS.HallTranslation.latticeTranslationData[e+2]+(b?" -1":"");return""},"~S,~B");c$.getHallTerms=d(c$,"getHallTerms",function(){return null==JS.HallTranslation.hallTranslationTerms?JS.HallTranslation.hallTranslationTerms=[new JS.HallTranslation("a",JU.P3i.new3(6,0,0)),new JS.HallTranslation("b",JU.P3i.new3(0,6,0)),new JS.HallTranslation("c",JU.P3i.new3(0,0,6)),new JS.HallTranslation("n",JU.P3i.new3(6,6,6)),new JS.HallTranslation("u",JU.P3i.new3(3,0,0)),new JS.HallTranslation("v",JU.P3i.new3(0,
3,0)),new JS.HallTranslation("w",JU.P3i.new3(0,0,3)),new JS.HallTranslation("d",JU.P3i.new3(3,3,3)),new JS.HallTranslation("1",JU.P3i.new3(2,6,-1)),new JS.HallTranslation("1",JU.P3i.new3(3,4,-1)),new JS.HallTranslation("2",JU.P3i.new3(3,8,-1)),new JS.HallTranslation("1",JU.P3i.new3(4,3,-1)),new JS.HallTranslation("3",JU.P3i.new3(4,9,-1)),new JS.HallTranslation("1",JU.P3i.new3(6,2,-1)),new JS.HallTranslation("2",JU.P3i.new3(6,4,-1)),new JS.HallTranslation("4",JU.P3i.new3(6,8,-1)),new JS.HallTranslation("5",
JU.P3i.new3(6,10,-1)),new JS.HallTranslation("r",JU.P3i.new3(4,8,8)),new JS.HallTranslation("s",JU.P3i.new3(8,8,4)),new JS.HallTranslation("t",JU.P3i.new3(8,4,8))]:JS.HallTranslation.hallTranslationTerms});c$.getHallTranslation=d(c$,"getHallTranslation",function(a,b){for(var c=null,e=JS.HallTranslation.getHallTerms().length;0<=--e;){var g=JS.HallTranslation.hallTranslationTerms[e];if(g.translationCode==a&&(0==g.rotationOrder||g.rotationOrder==b)){c=new JS.HallTranslation(a,null);c.translationCode=
a;c.rotationShift12ths=g.rotationShift12ths;c.vectorShift12ths=g.vectorShift12ths;break}}return c},"~S,~N");S(c$,"latticeTranslationData","\x00;unknown;;P;primitive;;I;body-centered; 1n;R;rhombohedral; 1r 1r;F;face-centered; 1ab 1bc 1ac;A;A-centered; 1bc;B;B-centered; 1ac;C;C-centered; 1ab;S;rhombohedral(S); 1s 1s;T;rhombohedral(T); 1t 1t".split(";"));c$.nLatticeTypes=c$.prototype.nLatticeTypes=y(JS.HallTranslation.latticeTranslationData.length/3)-1;S(c$,"hallTranslationTerms",null)});H("JS");R(["JU.M4"],
"JS.SymmetryOperation","java.lang.Float JU.Lst $.Matrix $.P3 $.P4 $.PT $.Quat $.SB $.V3 JU.Escape $.Logger $.Measure $.Parser".split(" "),function(){c$=Q(function(){this.xyz=this.xyzOriginal=null;this.doNormalize=!0;this.isFinalized=!1;this.opId=0;this.myLabels=this.atomTest=this.centering=null;this.modDim=0;this.rsvs=this.linearRotTrans=null;this.isBio=!1;this.sigma=null;this.index=0;this.subsystemCode=null;this.timeReversal=0;this.magOp=3.4028235E38;this.unCentered=this.isCenteringOp=!1;K(this,
arguments)},JS,"SymmetryOperation",JU.M4);d(c$,"setSigma",function(a,b){this.subsystemCode=a;this.sigma=b},"~S,JU.Matrix");ga(c$,function(a,b,c,e,g){this.doNormalize=g;null==a?this.opId=e:(this.xyzOriginal=a.xyzOriginal,this.xyz=a.xyz,this.opId=a.opId,this.modDim=a.modDim,this.myLabels=a.myLabels,this.index=a.index,this.linearRotTrans=a.linearRotTrans,this.sigma=a.sigma,this.subsystemCode=a.subsystemCode,this.timeReversal=a.timeReversal,this.setMatrix(!1),a.isFinalized||this.doFinalize(),g&&null==
this.sigma&&this.setOffset(b,c,e))},"JS.SymmetryOperation,~A,~N,~N,~B");d(c$,"setGamma",function(a){for(var b=3+this.modDim,c=(this.rsvs=new JU.Matrix(null,b+1,b+1)).getArray(),e=$(b,0),g=0,d=0;d<b;d++){for(var f=0;f<b;f++)c[d][f]=this.linearRotTrans[g++];e[d]=(a?-1:1)*this.linearRotTrans[g++]}c[b][b]=1;a&&(this.rsvs=this.rsvs.inverse());for(d=0;d<b;d++)c[d][b]=e[d];c=this.rsvs.getSubmatrix(0,0,3,3).getArray();for(d=0;3>d;d++)for(f=0;4>f;f++)this.setElement(d,f,3>f?c[d][f]:e[d]);this.setElement(3,
3,1)},"~B");d(c$,"doFinalize",function(){this.m03/=12;this.m13/=12;this.m23/=12;if(0<this.modDim)for(var a=this.rsvs.getArray(),b=a.length-1;0<=--b;)a[b][3+this.modDim]/=12;this.isFinalized=!0});d(c$,"getXyz",function(a){return a&&0==this.modDim||null==this.xyzOriginal?this.xyz:this.xyzOriginal},"~B");d(c$,"newPoint",function(a,b,c,e,g){this.rotTrans2(a,b);b.add3(c,e,g)},"JU.P3,JU.P3,~N,~N,~N");d(c$,"dumpInfo",function(){return"\n"+this.xyz+"\ninternal matrix representation:\n"+this.toString()});
c$.dumpSeitz=d(c$,"dumpSeitz",function(a){return(new JU.SB).append("{\t").appendI(p(a.m00)).append("\t").appendI(p(a.m01)).append("\t").appendI(p(a.m02)).append("\t").append(JS.SymmetryOperation.twelfthsOf(a.m03)).append("\t}\n").append("{\t").appendI(p(a.m10)).append("\t").appendI(p(a.m11)).append("\t").appendI(p(a.m12)).append("\t").append(JS.SymmetryOperation.twelfthsOf(a.m13)).append("\t}\n").append("{\t").appendI(p(a.m20)).append("\t").appendI(p(a.m21)).append("\t").appendI(p(a.m22)).append("\t").append(JS.SymmetryOperation.twelfthsOf(a.m23)).append("\t}\n").append("{\t0\t0\t0\t1\t}\n").toString()},
"JU.M4");c$.dumpCanonicalSeitz=d(c$,"dumpCanonicalSeitz",function(a){return(new JU.SB).append("{\t").appendI(p(a.m00)).append("\t").appendI(p(a.m01)).append("\t").appendI(p(a.m02)).append("\t").append(JS.SymmetryOperation.twelfthsOf((a.m03+12)%12)).append("\t}\n").append("{\t").appendI(p(a.m10)).append("\t").appendI(p(a.m11)).append("\t").appendI(p(a.m12)).append("\t").append(JS.SymmetryOperation.twelfthsOf((a.m13+12)%12)).append("\t}\n").append("{\t").appendI(p(a.m20)).append("\t").appendI(p(a.m21)).append("\t").appendI(p(a.m22)).append("\t").append(JS.SymmetryOperation.twelfthsOf((a.m23+
12)%12)).append("\t}\n").append("{\t0\t0\t0\t1\t}\n").toString()},"JU.M4");d(c$,"setMatrixFromXYZ",function(a,b,c){if(null==a)return!1;this.xyzOriginal=a;a=a.toLowerCase();var e=(b+4)*(b+4);this.modDim=b;0<b&&(this.myLabels=JS.SymmetryOperation.labelsXn);this.linearRotTrans=T(e,0);(b=a.startsWith("!"))&&(a=a.substring(1));if(0==a.indexOf("xyz matrix:"))return this.xyz=a,JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans),this.setFromMatrix(null,b);if(0==a.indexOf("[[")){a=a.$replace("[",
" ").$replace("]"," ").$replace(","," ");JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans);for(c=0;c<e;c++)if(Float.isNaN(this.linearRotTrans[c]))return!1;this.setMatrix(b);this.isFinalized=!0;this.xyz=(this.isBio=0<=a.indexOf("bio"))?this.toString():JS.SymmetryOperation.getXYZFromMatrix(this,!1,!1,!1);return!0}a=JS.SymmetryOperation.getMatrixFromString(this,a,this.linearRotTrans,c);if(null==a)return!1;this.setMatrix(b);this.xyz=b?JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,
!1):a;JU.Logger.debugging&&JU.Logger.debug(""+this);return!0},"~S,~N,~B");d(c$,"setMatrix",function(a){16<this.linearRotTrans.length?this.setGamma(a):(this.setA(this.linearRotTrans),a&&(a=JU.P3.new3(this.m03,this.m13,this.m23),this.invertM(this),this.rotate(a),a.scale(-1),this.setTranslation(a)))},"~B");d(c$,"setFromMatrix",function(a,b){var c=0,e=0;this.myLabels=0==this.modDim?JS.SymmetryOperation.labelsXYZ:JS.SymmetryOperation.labelsXn;for(var g=0,d=3+this.modDim,f=0;g<d;f++){if(Float.isNaN(this.linearRotTrans[f]))return!1;
c=this.linearRotTrans[f];1E-5>Math.abs(c)&&(c=0);0==(f+1)%(d+1)&&(null!=a&&(c/=12,e<a.length&&(c+=a[e++])),c=JS.SymmetryOperation.normalizeTwelfths((0>c?-1:1)*Math.round(Math.abs(12*c))/12,this.doNormalize),g++);this.linearRotTrans[f]=c}this.linearRotTrans[this.linearRotTrans.length-1]=1;this.setMatrix(b);this.isFinalized=null==a;this.xyz=JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,!1);return!0},"~A,~B");c$.getMatrixFromString=d(c$,"getMatrixFromString",function(a,b,c,e){var g=!1,d=!1,f=!1,k=
null==a?0:a.modDim,l=4+k,j=null!=a&&a.doNormalize,m=0<k?3:0;c[c.length-1]=1;var n=b.indexOf(";")+1;0!=n&&(e=!0,n==b.length&&(b+="0,0,0"));var s=-1;a=null==a||0==k?null:a.myLabels;null==a&&(a=JS.SymmetryOperation.labelsXYZ);b=b.toLowerCase()+",";if(0<k)for(var q=k+3;0<=--q;)b=JU.PT.rep(b,JS.SymmetryOperation.labelsXn[q],JS.SymmetryOperation.labelsXnSub[q]);for(var r=0,w=0,y=0,G,v=0,I=1,C="",z="",q=0;q<b.length;q++){switch(G=b.charAt(q)){case ";":break;case "'":case " ":case "{":case "}":case "!":continue;
case "-":f=!0;continue;case "+":f=!1;continue;case "/":g=!0;continue;case "x":case "y":case "z":case "a":case "b":case "c":case "d":case "e":case "f":case "g":case "h":w=y*l;g="x"<=G?G.charCodeAt(0)-120:G.charCodeAt(0)-97+m;r=w+g;f=f?-1:1;e&&0!=v?(c[r]=v,f=p(v),v=0):c[r]=f;C+=JS.SymmetryOperation.plusMinus(C,f,a[g]);break;case ",":if(0!=n){if(0<n){s=q;q=n-1;n=-q;v=0;continue}n=q+1;q=s}v=JS.SymmetryOperation.normalizeTwelfths(v,j);c[w+l-1]=v;C+=JS.SymmetryOperation.xyzFraction(v,!1,!0);z+=(""===z?
"":",")+C;if(y==l-2)return z;v=0;C="";if(2<y++&&0==k)return JU.Logger.warn("Symmetry Operation? "+b),null;break;case ".":d=!0;I=1;continue;case "0":if(!d&&(g||!e))continue;default:var x=G.charCodeAt(0)-48;if(d&&0<=x&&9>=x){I/=10;0>v&&(f=!0);v+=I*x*(f?-1:1);continue}0<=x&&9>=x?g?0==v?c[r]/=x:v/=x:v=10*v+(f?-1:1)*x:JU.Logger.warn("symmetry character?"+G)}d=g=f=!1}return null},"JS.SymmetryOperation,~S,~A,~B");c$.xyzFraction=d(c$,"xyzFraction",function(a,b,c){a=Math.round(a);if(b)for(;0>a;)a+=12;else if(c){for(;6<
a;)a-=12;for(;-6>a;)a+=12}b=JS.SymmetryOperation.twelfthsOf(a);return"0"==b.charAt(0)?"":0<a?"+"+b:b},"~N,~B,~B");c$.twelfthsOf=d(c$,"twelfthsOf",function(a){var b="";a=Math.round(a);if(12==a)return"1";if(-12==a)return"-1";0>a&&(a=-a,0!=a%12&&(b="-"));var c=y(a/12);if(1>c)return b+JS.SymmetryOperation.twelfths[a%12];var e=0;switch(a%12){case 0:return b+c;case 1:case 5:case 7:case 11:e=12;break;case 2:case 10:e=6;break;case 3:case 9:e=4;break;case 4:case 8:e=3;break;case 6:e=2}return b+y(a*e/12)+"/"+
e},"~N");c$.plusMinus=d(c$,"plusMinus",function(a,b,c){return 0==b?"":(0>b?"-":0==a.length?"":"+")+(1==b||-1==b?"":""+p(Math.abs(b)))+c},"~S,~N,~S");c$.normalizeTwelfths=d(c$,"normalizeTwelfths",function(a,b){a*=12;if(b){for(;6<a;)a-=12;for(;-6>=a;)a+=12}return a},"~N,~B");c$.getXYZFromMatrix=d(c$,"getXYZFromMatrix",function(a,b,c,e){var g="",d=U(a,JS.SymmetryOperation)?a:null;if(null!=d&&0<d.modDim)return JS.SymmetryOperation.getXYZFromRsVs(d.rsvs.getRotation(),d.rsvs.getTranslation(),b);for(var d=
T(4,0),f=0;3>f;f++){var k=3>f?0:3;a.getRow(f,d);for(var l="",j=0;3>j;j++)0!=d[j]&&(l+=JS.SymmetryOperation.plusMinus(l,d[j],JS.SymmetryOperation.labelsXYZ[j+k]));l+=JS.SymmetryOperation.xyzFraction(b?d[3]:12*d[3],c,e);g+=","+l}return g.substring(1)},"JU.M4,~B,~B,~B");d(c$,"setOffset",function(a,b,c){var e=b+c,d=0,h=0,f=0;null==this.atomTest&&(this.atomTest=new JU.P3);for(;b<e;b++)this.newPoint(a[b],this.atomTest,0,0,0),d+=this.atomTest.x,h+=this.atomTest.y,f+=this.atomTest.z;for(;-0.001>d||d>=c+0.001;)this.m03+=
0>d?1:-1,d+=0>d?c:-c;for(;-0.001>h||h>=c+0.001;)this.m13+=0>h?1:-1,h+=0>h?c:-c;for(;-0.001>f||f>=c+0.001;)this.m23+=0>f?1:-1,f+=0>f?c:-c},"~A,~N,~N");d(c$,"rotateAxes",function(a,b,c,e){var d=Array(3);this.getRotationScale(e);for(var h=a.length;0<=--h;)c.setT(a[h]),b.toFractional(c,!0),e.rotate(c),b.toCartesian(c,!0),d[h]=JU.V3.newV(c);return d},"~A,JS.UnitCell,JU.P3,JU.M3");d(c$,"getDescription",function(a,b,c,e,d){this.isFinalized||this.doFinalize();var h=new JU.V3,f=new JU.P3,k=new JU.P3,l=new JU.P3,
j=new JU.P3,m=new JU.V3,n=new JU.V3,s=null;null!=this.centering&&(s=JU.V3.newV(this.centering),b.toCartesian(s,!1));if(null==c||Float.isNaN(c.x))c=new JU.P3;if(null!=e){JS.SymmetryOperation.setFractional(b,l,c,f);this.rotTrans(l);b.toCartesian(l,!1);b.toUnitCell(l,f);j.setT(e);b.toUnitCell(j,f);if(0.1<l.distance(j))return null;JS.SymmetryOperation.setFractional(b,l,c,null);this.rotTrans(l);JS.SymmetryOperation.setFractional(b,j,e,null);n.sub2(j,l)}l.set(1,0,0);j.set(0,1,0);var q=JU.P3.new3(0,0,1);
l.add(c);j.add(c);q.add(c);var r=this.rotTransCart(c,b,n),w=this.rotTransCart(l,b,n),H=this.rotTransCart(j,b,n),G=this.rotTransCart(q,b,n),v=JU.V3.newVsub(w,r),I=JU.V3.newVsub(H,r),C=JU.V3.newVsub(G,r);JS.SymmetryOperation.approx(n);h.cross(v,I);var z=0>h.dot(C);z&&(w.sub2(r,v),H.sub2(r,I),G.sub2(r,C));var x;x=JU.Measure.computeHelicalAxis(null,135266306,c,r,JU.Quat.getQuaternionFrame(r,w,H).div(JU.Quat.getQuaternionFrame(c,l,j)));e=x[0];var s=x[1],D=p(Math.abs(JU.PT.approx(x[3].x,1))),K=JS.SymmetryOperation.approxF(x[3].y);
z&&(w.add2(r,v),H.add2(r,I),G.add2(r,C));x=JU.V3.newVsub(r,c);0.1>x.length()&&(x=null);var E=null,O=null,L=null,P=0==D,F=!P,N=!1,B=!1;if(F||z)x=null;if(z&&P)O=JU.P3.newP(c),O.add(r),O.scale(0.5),E=r,N=!0;else if(z){var A=0==K?new JU.V3:s,t=0;switch(D){case 60:t=0.6666667;break;case 120:t=2;break;case 90:t=1;break;case 180:L=JU.P3.newP(c),L.add(A),e.scaleAdd2(0.5,A,c),0.1<L.distance(r)?(x=JU.V3.newVsub(r,L),JS.SymmetryOperation.setFractional(b,f,x,null),m.setT(f)):x=null,z=F=!1,B=!0}0!=t&&(h.sub2(c,
e),h.add(r),h.sub(e),h.sub(A),h.scale(t),e.add(h),O=new JU.P3,O.scaleAdd2(0.5,A,e),E=new JU.P3,E.scaleAdd2(-2,O,c),E.scale(-1))}else null!=x&&(f.setT(x),b.toFractional(f,!1),1==JS.SymmetryOperation.approxF(f.x)&&(f.x=0),1==JS.SymmetryOperation.approxF(f.y)&&(f.y=0),1==JS.SymmetryOperation.approxF(f.z)&&(f.z=0),m.setT(f),b.toCartesian(f,!1),x.setT(f));var M=D;JS.SymmetryOperation.approx0(s);if(F){var u=new JU.P3;h.setT(s);A=D;z?(u.add2(e,h),A=Math.round(JU.Measure.computeTorsion(E,e,u,r,!0))):(0==
K?(u.setT(e),f.scaleAdd2(1,u,h)):(f.add2(e,h),u.scaleAdd2(0.5,h,e)),A=Math.round(JU.Measure.computeTorsion(c,e,f,r,!0)));0!=A&&(D=A)}if(F&&(!z&&0==K)&&(0>s.z||0==s.z&&(0>s.y||0==s.y&&0>s.x)))s.scale(-1),D=-D;A="identity";N?(f.setT(O),b.toFractional(f,!1),A="inversion center|"+this.strCoord(f)):F?z?A=""+y(360/M)+"-bar axis":0!=K?(A=""+y(360/M)+"-fold screw axis",f.setT(s),b.toFractional(f,!1),A+="|translation: "+this.strCoord(f)):A="C"+y(360/M)+" axis":null!=x?(t=" "+this.strCoord(m),P?A="translation:"+
t:B&&(A=JS.SymmetryOperation.approxF(m.x),M=JS.SymmetryOperation.approxF(m.y),u=JS.SymmetryOperation.approxF(m.z),t=" "+this.strCoord(m),A=0!=A&&0!=M&&0!=u?Math.abs(A)==Math.abs(M)&&Math.abs(M)==Math.abs(u)?"d-":"g-":0!=A&&0!=M||0!=M&&0!=u||0!=u&&0!=A?"n-":0!=A?"a-":0!=M?"b-":"c-",A+="glide plane |translation:"+t)):B&&(A="mirror plane");z&&!N&&(f.setT(O),b.toFractional(f,!1),A+="|inversion center at "+this.strCoord(f));u=null;M=this.isBio?this.xyzOriginal:JS.SymmetryOperation.getXYZFromMatrix(this,
!1,!1,!1);t=new JU.SB;if(null!=d){u=null;d="\ndraw ID "+d+"_";t=new JU.SB;t.append(("// "+this.xyzOriginal+"|"+M+"|"+A).$replace("\n"," ")).append("\n").append(d).append("* delete");JS.SymmetryOperation.drawLine(t,d+"frame1X",0.15,c,l,"red");JS.SymmetryOperation.drawLine(t,d+"frame1Y",0.15,c,j,"green");JS.SymmetryOperation.drawLine(t,d+"frame1Z",0.15,c,q,"blue");F&&(u=new JU.P3,l="red",M=D,j=1,h.setT(s),z?(u.add2(e,h),0==K&&(u.setT(O),h.scale(3),f.scaleAdd2(-1,h,e),t.append(d).append("rotVector2 diameter 0.1 ").append(JU.Escape.eP(e)).append(JU.Escape.eP(f)).append(" color red")),
j=r.distance(u),t.append(d).append("rotLine1 ").append(JU.Escape.eP(u)).append(JU.Escape.eP(E)).append(" color red"),t.append(d).append("rotLine2 ").append(JU.Escape.eP(u)).append(JU.Escape.eP(r)).append(" color red")):0==K?(0.2>c.distance(r)||(t.append(d).append("rotLine1 ").append(JU.Escape.eP(c)).append(JU.Escape.eP(e)).append(" color red"),t.append(d).append("rotLine2 ").append(JU.Escape.eP(r)).append(JU.Escape.eP(e)).append(" color red")),h.scale(3),f.scaleAdd2(-1,h,e),t.append(d).append("rotVector2 diameter 0.1 ").append(JU.Escape.eP(e)).append(JU.Escape.eP(f)).append(" color red"),
u.setT(e),0==K&&0.2>c.distance(r)&&u.scaleAdd2(0.5,u,h)):(l="orange",t.append(d).append("rotLine1 ").append(JU.Escape.eP(c)).append(JU.Escape.eP(e)).append(" color red"),f.add2(e,h),t.append(d).append("rotLine2 ").append(JU.Escape.eP(r)).append(JU.Escape.eP(f)).append(" color red"),u.scaleAdd2(0.5,h,e)),f.add2(u,h),z&&0!=K&&(t.append(d).append("rotRotLine1").append(JU.Escape.eP(u)).append(JU.Escape.eP(E)).append(" color red"),t.append(d).append("rotRotLine2").append(JU.Escape.eP(u)).append(JU.Escape.eP(r)).append(" color red")),
t.append(d).append("rotRotArrow arrow width 0.10 scale "+j+" arc ").append(JU.Escape.eP(u)).append(JU.Escape.eP(f)),f.setT(z?E:c),0.1>f.distance(r)&&f.set(Math.random(),Math.random(),Math.random()),t.append(JU.Escape.eP(f)),f.set(0,M,0),t.append(JU.Escape.eP(f)).append(" color red"),t.append(d).append("rotVector1 vector diameter 0.1 ").append(JU.Escape.eP(e)).append(JU.Escape.eP(h)).append("color ").append(l));if(B){0.2<c.distance(L)&&t.append(d).append("planeVector arrow ").append(JU.Escape.eP(c)).append(JU.Escape.eP(L)).append(" color indigo");
u=d+"plane";null!=x&&(this.drawFrameLine("X",L,v,0.15,f,t,u,"red"),this.drawFrameLine("Y",L,I,0.15,f,t,u,"green"),this.drawFrameLine("Z",L,C,0.15,f,t,u,"blue"));l=null==x?"green":"blue";h.setT(s);h.normalize();j=JU.P4.new4(h.x,h.y,h.z,-h.x*e.x-h.y*e.y-h.z*e.z);h=new JU.Lst;h.addLast(b.getCanonicalCopy(1.05,!1));a.intersectPlane(j,h,3);for(a=h.size();0<=--a;)j=h.get(a),t.append(d).append("planep").appendI(a).append(" ").append(JU.Escape.eP(j[0])).append(JU.Escape.eP(j[1])),3==j.length&&t.append(JU.Escape.eP(j[2])),
t.append(" color translucent ").append(l);0==h.size()&&(f.add2(e,s),t.append(d).append("planeCircle scale 2.0 circle ").append(JU.Escape.eP(e)).append(JU.Escape.eP(f)).append(" color translucent ").append(l).append(" mesh fill"))}z&&(u=d+"inv",t.append(d).append("invPoint diameter 0.4 ").append(JU.Escape.eP(O)),t.append(d).append("invArrow arrow ").append(JU.Escape.eP(c)).append(JU.Escape.eP(E)).append(" color indigo"),N||(this.drawFrameLine("X",E,v,0.15,f,t,u,"red"),this.drawFrameLine("Y",E,I,0.15,
f,t,u,"green"),this.drawFrameLine("Z",E,C,0.15,f,t,u,"blue")));null!=x&&(null==L&&(L=JU.P3.newP(c)),t.append(d).append("transVector vector ").append(JU.Escape.eP(L)).append(JU.Escape.eP(x)));k.setT(r);f.sub2(w,r);f.scaleAdd2(0.9,f,k);JS.SymmetryOperation.drawLine(t,d+"frame2X",0.2,k,f,"red");f.sub2(H,r);f.scaleAdd2(0.9,f,k);JS.SymmetryOperation.drawLine(t,d+"frame2Y",0.2,k,f,"green");f.sub2(G,r);f.scaleAdd2(0.9,f,k);JS.SymmetryOperation.drawLine(t,d+"frame2Z",0.2,k,f,"purple");t.append("\nvar pt00 = "+
JU.Escape.eP(c));t.append("\nsym_point = pt00");t.append("\nvar p0 = "+JU.Escape.eP(k));t.append("\nvar set2 = within(0.2,p0);if(!set2){set2 = within(0.2,p0.uxyz.xyz)}");t.append("\nsym_target = set2;if (set2) {");t.append(d).append("offsetFrameX diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(v)).append("*0.9} color red");t.append(d).append("offsetFrameY diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(I)).append("*0.9} color green");t.append(d).append("offsetFrameZ diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(C)).append("*0.9} color purple");
t.append("\n}}\n");u=t.toString()}null==x&&(m=null);F&&!z&&0!=K&&(x=JU.V3.newV(s),f.setT(x),b.toFractional(f,!1),m=JU.V3.newV(f));B&&(D=0);z?N&&(m=x=s=e=null):P&&(s=e=null);null!=s&&s.normalize();b=null;b=JU.M4.newM4(this);0!=n.length()&&(b.m03+=n.x,b.m13+=n.y,b.m23+=n.z);M=this.isBio?b.toString():JS.SymmetryOperation.getXYZFromMatrix(b,!1,!1,!1);return[M,this.xyzOriginal,A,u,JS.SymmetryOperation.approx0(m),JS.SymmetryOperation.approx0(x),JS.SymmetryOperation.approx0(O),JS.SymmetryOperation.approx0(e),
JS.SymmetryOperation.approx0(s),Integer.$valueOf(D),b,n,this.centering]},"JM.ModelSet,J.api.SymmetryInterface,JU.P3,JU.P3,~S");c$.setFractional=d(c$,"setFractional",function(a,b,c,e){b.setT(c);null!=e&&a.toUnitCell(b,e);a.toFractional(b,!1)},"J.api.SymmetryInterface,JU.P3,JU.T3,JU.P3");d(c$,"drawFrameLine",function(a,b,c,e,d,h,f,k){d.setT(b);d.add(c);JS.SymmetryOperation.drawLine(h,f+"Frame"+a,e,b,d,"translucent "+k)},"~S,JU.P3,JU.V3,~N,JU.P3,JU.SB,~S,~S");d(c$,"rotTransCart",function(a,b,c){a=JU.P3.newP(a);
b.toFractional(a,!1);this.rotTrans2(a,a);a.add(c);b.toCartesian(a,!1);return a},"JU.P3,J.api.SymmetryInterface,JU.V3");d(c$,"strCoord",function(a){JS.SymmetryOperation.approx0(a);return this.isBio?a.x+" "+a.y+" "+a.z:JS.SymmetryOperation.fcoord(a)},"JU.T3");c$.drawLine=d(c$,"drawLine",function(a,b,c,e,d,h){a.append(b).append(" diameter ").appendF(c).append(JU.Escape.eP(e)).append(JU.Escape.eP(d)).append(" color ").append(h)},"JU.SB,~S,~N,JU.P3,JU.P3,~S");c$.fcoord=d(c$,"fcoord",function(a){return JS.SymmetryOperation.fc(a.x)+
" "+JS.SymmetryOperation.fc(a.y)+" "+JS.SymmetryOperation.fc(a.z)},"JU.T3");c$.fc=d(c$,"fc",function(a){var b=Math.abs(a),b=p(JS.SymmetryOperation.approxF(24*b));a=0>a?"-":"";return 0!=b%8?a+JS.SymmetryOperation.twelfthsOf(b>>1):0==b?"0":24==b?a+"1":a+y(b/8)+"/3"},"~N");c$.approx0=d(c$,"approx0",function(a){null!=a&&(1E-4>Math.abs(a.x)&&(a.x=0),1E-4>Math.abs(a.y)&&(a.y=0),1E-4>Math.abs(a.z)&&(a.z=0));return a},"JU.T3");c$.approx=d(c$,"approx",function(a){null!=a&&(a.x=JS.SymmetryOperation.approxF(a.x),
a.y=JS.SymmetryOperation.approxF(a.y),a.z=JS.SymmetryOperation.approxF(a.z));return a},"JU.T3");c$.approxF=d(c$,"approxF",function(a){return JU.PT.approx(a,100)},"~N");c$.normalizeTranslation=d(c$,"normalizeTranslation",function(a){a.m03=(p(a.m03)+12)%12;a.m13=(p(a.m13)+12)%12;a.m23=(p(a.m23)+12)%12},"JU.M4");c$.getXYZFromRsVs=d(c$,"getXYZFromRsVs",function(a,b,c){a=a.getArray();b=b.getArray();for(var e=a.length,d="",h=0;h<e;h++){for(var d=d+",",f=0;f<e;f++){var k=a[h][f];0!=k&&(d+=(0>k?"-":d.endsWith(",")?
"":"+")+(1==Math.abs(k)?"":""+y(Math.abs(k)))+"x"+(f+1))}d+=JS.SymmetryOperation.xyzFraction(y(b[h][0]*(c?1:12)),!1,!0)}return JU.PT.rep(d.substring(1),",+",",")},"JU.Matrix,JU.Matrix,~B");d(c$,"toString",function(){return null==this.rsvs?Z(this,JS.SymmetryOperation,"toString",[]):Z(this,JS.SymmetryOperation,"toString",[])+" "+this.rsvs.toString()});d(c$,"getSpinOp",function(){3.4028235E38==this.magOp&&(this.magOp=this.determinant3()*this.timeReversal);return this.magOp});d(c$,"setTimeReversal",function(a){this.timeReversal=
a},"~N");c$.cleanMatrix=d(c$,"cleanMatrix",function(a){var b=new JU.SB;b.append("[ ");for(var c=T(4,0),e=0;3>e;e++)a.getRow(e,c),b.append("[ ").appendI(p(c[0])).append(" ").appendI(p(c[1])).append(" ").appendI(p(c[2])).append(" "),b.append(JS.SymmetryOperation.twelfthsOf(12*c[3])).append(" ]");return b.append(" ]").toString()},"JU.M4");d(c$,"setCentering",function(a,b){null==this.centering&&!this.unCentered&&(0==this.modDim&&1<this.index&&1==this.m00&&1==this.m11&&1==this.m22&&0==this.m01&&0==this.m02&&
0==this.m10&&0==this.m12&&0==this.m20&&0==this.m21?(this.centering=JU.V3.new3(this.m03,this.m13,this.m23),0==this.centering.lengthSquared()&&(this.unCentered=!0,this.centering=null),b||this.centering.scale(0.083333336),this.isCenteringOp=!0):this.centering=a);return this.centering},"JU.V3,~B");S(c$,"twelfths","0 1/12 1/6 1/4 1/3 5/12 1/2 7/12 2/3 3/4 5/6 11/12".split(" "));c$.labelsXYZ=c$.prototype.labelsXYZ=["x","y","z"];c$.labelsXn=c$.prototype.labelsXn="x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12 x13".split(" ");
c$.labelsXnSub=c$.prototype.labelsXnSub="xyzabcdefghij".split("")});H("JS");R(null,"JS.SymmetryInfo",["JU.Lst","$.PT","JU.SimpleUnitCell"],function(){c$=Q(function(){this.isMultiCell=this.coordinatesAreFractional=!1;this.centerings=this.periodicOriginXyz=this.cellRange=this.infoStr=this.symmetryOperations=this.sgName=null;K(this,arguments)},JS,"SymmetryInfo");d(c$,"isPeriodic",function(){return null!=this.periodicOriginXyz});D(c$,function(){});d(c$,"setSymmetryInfo",function(a){this.cellRange=a.get("unitCellRange");
this.periodicOriginXyz=a.get("periodicOriginXyz");this.sgName=a.get("spaceGroup");if(null==this.sgName||""===this.sgName)this.sgName="spacegroup unspecified";var b=a.containsKey("symmetryCount")?a.get("symmetryCount").intValue():0;this.symmetryOperations=a.remove("symmetryOps");this.infoStr="Spacegroup: "+this.sgName;if(null==this.symmetryOperations)this.infoStr+="\nNumber of symmetry operations: ?\nSymmetry Operations: unspecified\n";else{this.centerings=new JU.Lst;for(var c="",e="\nNumber of symmetry operations: "+
(0==b?1:b)+"\nSymmetry Operations:",d=0;d<b;d++){var h=this.symmetryOperations[d],e=e+("\n"+h.xyz);h.isCenteringOp&&(this.centerings.addLast(h.centering),h=JU.PT.replaceAllCharacters(h.xyz,"xyz","0"),c+=" ("+JU.PT.rep(h,"0+","")+")")}0<c.length&&(this.infoStr+="\nCentering: "+c);this.infoStr+=e}this.infoStr+="\n";b=a.get("notionalUnitcell");if(!JU.SimpleUnitCell.isValid(b))return null;this.isMultiCell=(this.coordinatesAreFractional=a.containsKey("coordinatesAreFractional")?a.get("coordinatesAreFractional").booleanValue():
!1)&&null!=this.symmetryOperations;return b},"java.util.Map")});H("JS");R(["JU.SimpleUnitCell","JU.P3","JV.JC"],"JS.UnitCell","java.lang.Float JU.M4 $.Quat $.T4 $.V3 J.api.Interface JU.BoxInfo $.Escape".split(" "),function(){c$=Q(function(){this.fractionalOffset=this.cartesianOffset=this.vertices=null;this.allFractionalRelative=!1;this.moreInfo=this.unitCellMultiplier=null;K(this,arguments)},JS,"UnitCell",JU.SimpleUnitCell);W(c$,function(){this.cartesianOffset=new JU.P3});D(c$,function(){aa(this,
JS.UnitCell,[])});c$.newP=d(c$,"newP",function(a,b){var c=new JS.UnitCell;c.init([-1,0,0,0,0,0,a[1].x,a[1].y,a[1].z,a[2].x,a[2].y,a[2].z,a[3].x,a[3].y,a[3].z]);c.allFractionalRelative=b;c.initUnitcellVertices();c.setCartesianOffset(a[0]);return c},"~A,~B");c$.newA=d(c$,"newA",function(a,b){var c=new JS.UnitCell;c.init(a);c.initUnitcellVertices();c.allFractionalRelative=b;return c},"~A,~B");d(c$,"initOrientation",function(a){if(null!=a){var b=new JU.M4;b.setToM3(a);this.matrixFractionalToCartesian.mul2(b,
this.matrixFractionalToCartesian);this.matrixCartesianToFractional.invertM(this.matrixFractionalToCartesian);this.initUnitcellVertices()}},"JU.M3");d(c$,"toUnitCell",function(a,b){null!=this.matrixCartesianToFractional&&(null==b?(this.matrixCartesianToFractional.rotTrans(a),this.unitize(a),this.matrixFractionalToCartesian.rotTrans(a)):(this.matrixCtoFANoOffset.rotTrans(a),this.unitize(a),a.add(b),this.matrixFtoCNoOffset.rotTrans(a)))},"JU.P3,JU.P3");d(c$,"unitize",function(a){switch(this.dimension){case 3:a.z=
JS.UnitCell.toFractionalX(a.z);case 2:a.y=JS.UnitCell.toFractionalX(a.y);case 1:a.x=JS.UnitCell.toFractionalX(a.x)}},"JU.P3");d(c$,"reset",function(){this.unitCellMultiplier=null;this.setOffset(JU.P3.new3(0,0,0))});d(c$,"setOffset",function(a){if(null!=a){var b=U(a,JU.T4)?a:null;if(null!=b?0>=b.w:100<=a.x||100<=a.y)if(this.unitCellMultiplier=0==a.z&&a.x==a.y?null:JU.P3.newP(a),null==b||0==b.w)return;if(this.hasOffset()||0<a.lengthSquared())this.fractionalOffset=new JU.P3,this.fractionalOffset.setT(a);
this.matrixCartesianToFractional.m03=-a.x;this.matrixCartesianToFractional.m13=-a.y;this.matrixCartesianToFractional.m23=-a.z;this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=0;this.matrixFractionalToCartesian.m13=0;this.matrixFractionalToCartesian.m23=0;this.matrixFractionalToCartesian.rotTrans(this.cartesianOffset);this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=this.cartesianOffset.z;
this.allFractionalRelative&&(this.matrixCtoFANoOffset.setM4(this.matrixCartesianToFractional),this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian))}},"JU.T3");d(c$,"setCartesianOffset",function(a){this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=this.cartesianOffset.z;a=this.hasOffset();this.fractionalOffset=new JU.P3;this.fractionalOffset.setT(this.cartesianOffset);
this.matrixCartesianToFractional.m03=0;this.matrixCartesianToFractional.m13=0;this.matrixCartesianToFractional.m23=0;this.matrixCartesianToFractional.rotTrans(this.fractionalOffset);this.matrixCartesianToFractional.m03=-this.fractionalOffset.x;this.matrixCartesianToFractional.m13=-this.fractionalOffset.y;this.matrixCartesianToFractional.m23=-this.fractionalOffset.z;this.allFractionalRelative&&(this.matrixCtoFANoOffset.setM4(this.matrixCartesianToFractional),this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian));
!a&&0==this.fractionalOffset.lengthSquared()&&(this.fractionalOffset=null)},"JU.T3");d(c$,"setMinMaxLatticeParameters",function(a,b){if(b.x<=b.y&&555<=b.y){var c=new JU.P3;JU.SimpleUnitCell.ijkToPoint3f(b.x,c,0);a.x=p(c.x);a.y=p(c.y);a.z=p(c.z);JU.SimpleUnitCell.ijkToPoint3f(b.y,c,1);b.x=p(c.x);b.y=p(c.y);b.z=p(c.z)}switch(this.dimension){case 1:a.y=0,b.y=1;case 2:a.z=0,b.z=1}},"JU.P3i,JU.P3i");d(c$,"dumpInfo",function(a){return"a="+this.a+", b="+this.b+", c="+this.c+", alpha="+this.alpha+", beta="+
this.beta+", gamma="+this.gamma+(a?"\nfractional to cartesian: "+this.matrixFractionalToCartesian+"\ncartesian to fractional: "+this.matrixCartesianToFractional:"")},"~B");d(c$,"getVertices",function(){return this.vertices});d(c$,"getCartesianOffset",function(){return this.cartesianOffset});d(c$,"getFractionalOffset",function(){return this.fractionalOffset});d(c$,"getTensor",function(a){var b=J.api.Interface.getUtil("Tensor");if(0==a[0]&&0==a[1]&&0==a[2])return a=a[7],b.setFromEigenVectors(JS.UnitCell.unitVectors,
[a,a,a],"iso","Uiso="+a,null);b.parBorU=a;var c=$(6,0),d=p(a[6]);if(12==d)c[0]=19.739208802178716*a[0],c[1]=19.739208802178716*a[1],c[2]=19.739208802178716*a[2],c[3]=39.47841760435743*a[3],c[4]=39.47841760435743*a[4],c[5]=39.47841760435743*a[5],a[7]=(a[0]+a[1]+a[3])/3;else{var g=4==d||5==d||8==d||9==d,h=2-d%2,f=8==d||9==d||10==d?19.739208802178716:4==d||5==d?0.25:2==d||3==d?Math.log(2):1,d=a[0]*f*(g?this.a_*this.a_:1),k=a[1]*f*(g?this.b_*this.b_:1),l=a[2]*f*(g?this.c_*this.c_:1),j=a[3]*f*(g?this.a_*
this.b_:1)*h,m=a[4]*f*(g?this.a_*this.c_:1)*h,g=a[5]*f*(g?this.b_*this.c_:1)*h;a[7]=Math.pow(d/19.739208802178716/this.a_/this.a_*k/19.739208802178716/this.b_/this.b_*l/19.739208802178716/this.c_/this.c_,0.3333);c[0]=this.a*this.a*d+this.b*this.b*this.cosGamma*this.cosGamma*k+this.c*this.c*this.cosBeta*this.cosBeta*l+this.a*this.b*this.cosGamma*j+this.b*this.c*this.cosGamma*this.cosBeta*g+this.a*this.c*this.cosBeta*m;c[1]=this.b*this.b*this.sinGamma*this.sinGamma*k+this.c*this.c*this.cA_*this.cA_*
l+this.b*this.c*this.cA_*this.sinGamma*g;c[2]=this.c*this.c*this.cB_*this.cB_*l;c[3]=2*this.b*this.b*this.cosGamma*this.sinGamma*k+2*this.c*this.c*this.cA_*this.cosBeta*l+this.a*this.b*this.sinGamma*j+this.b*this.c*(this.cA_*this.cosGamma+this.sinGamma*this.cosBeta)*g+this.a*this.c*this.cA_*m;c[4]=2*this.c*this.c*this.cB_*this.cosBeta*l+this.b*this.c*this.cosGamma*g+this.a*this.c*this.cB_*m;c[5]=2*this.c*this.c*this.cA_*this.cB_*l+this.b*this.c*this.cB_*this.sinGamma*g}return b.setFromThermalEquation(c,
JU.Escape.eAF(a))},"~A");d(c$,"getCanonicalCopy",function(a,b){var c=Array(8),d=null,g=null;b&&null!=this.unitCellMultiplier&&(d=new JU.P3,g=new JU.P3,JU.SimpleUnitCell.ijkToPoint3f(p(this.unitCellMultiplier.x),d,0),JU.SimpleUnitCell.ijkToPoint3f(p(this.unitCellMultiplier.y),g,0),g.sub(d));for(var h=0;8>h;h++){var f=c[h]=JU.P3.newP(JU.BoxInfo.unitCubePoints[h]);null!=d&&(a*=0==this.unitCellMultiplier.z?1:this.unitCellMultiplier.z,c[h].add3(d.x+g.x*f.x,d.y+g.y*f.y,d.z+g.z*f.z));this.matrixFractionalToCartesian.rotTrans(f);
b||f.sub(this.cartesianOffset)}return JU.BoxInfo.getCanonicalCopy(c,a)},"~N,~B");c$.toFractionalX=d(c$,"toFractionalX",function(a){a-=Math.floor(a);if(0.9999<a||1E-4>a)a=0;return a},"~N");d(c$,"initUnitcellVertices",function(){if(null!=this.matrixFractionalToCartesian){this.matrixCtoFANoOffset=JU.M4.newM4(this.matrixCartesianToFractional);this.matrixFtoCNoOffset=JU.M4.newM4(this.matrixFractionalToCartesian);this.vertices=Array(8);for(var a=8;0<=--a;)this.vertices[a]=new JU.P3,this.matrixFractionalToCartesian.rotTrans2(JU.BoxInfo.unitCubePoints[a],
this.vertices[a])}});d(c$,"checkDistance",function(a,b,c,d,g,h,f,k){a=JU.P3.newP(a);this.toCartesian(a,!0);for(var l=-g;l<=g;l++)for(var j=-h;j<=h;j++)for(var m=-f;m<=f;m++){k.set(b.x+l,b.y+j,b.z+m);this.toCartesian(k,!0);var n=a.distance(k);if(0<d?Math.abs(n-c)<=d:n<=c&&0.1<n)return k.set(l,j,m),!0}return!1},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");d(c$,"getUnitCellMultiplier",function(){return this.unitCellMultiplier});d(c$,"getUnitCellVectors",function(){var a=this.matrixFractionalToCartesian;return[JU.V3.newV(this.cartesianOffset),
JU.V3.new3(a.m00,a.m10,a.m20),JU.V3.new3(a.m01,a.m11,a.m21),JU.V3.new3(a.m02,a.m12,a.m22)]});d(c$,"isSameAs",function(a){if(a.notionalUnitcell.length!=this.notionalUnitcell.length)return!1;for(var b=this.notionalUnitcell.length;0<=--b;)if(this.notionalUnitcell[b]!=a.notionalUnitcell[b]&&(!Float.isNaN(this.notionalUnitcell[b])||!Float.isNaN(a.notionalUnitcell[b])))return!1;return null==this.fractionalOffset?!a.hasOffset():null==a.fractionalOffset?!this.hasOffset():0==this.fractionalOffset.distanceSquared(a.fractionalOffset)},
"JS.UnitCell");d(c$,"hasOffset",function(){return null!=this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()});d(c$,"getState",function(){var a="";null!=this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()&&(a+="  unitcell offset "+JU.Escape.eP(this.fractionalOffset)+";\n");null!=this.unitCellMultiplier&&(a+="  unitcell range "+JU.Escape.eP(this.unitCellMultiplier)+";\n");return a});d(c$,"getQuaternionRotation",function(a){var b=this.vertices[4],c=this.vertices[2],d=this.vertices[1],
g=new JU.V3,h=new JU.V3;switch("abc".indexOf(a)){case 0:g.cross(b,d);h.cross(g,b);break;case 1:g.cross(c,b);h.cross(g,c);break;case 2:g.cross(d,c);h.cross(g,d);break;default:return null}return JU.Quat.getQuaternionFrame(null,h,g).inv()},"~S");S(c$,"twoP2",19.739208802178716);c$.unitVectors=c$.prototype.unitVectors=[JV.JC.axisX,JV.JC.axisY,JV.JC.axisZ]})})(Clazz,Clazz.doubleToInt,Clazz.declarePackage,Clazz.instanceOf,Clazz.load,Clazz.instantialize,Clazz.decorateAsClass,Clazz.floatToInt,Clazz.makeConstructor,
Clazz.defineEnumConstant,Clazz.exceptionOf,Clazz.newIntArray,Clazz.defineStatics,Clazz.newFloatArray,Clazz.declareType,Clazz.prepareFields,Clazz.superConstructor,Clazz.newByteArray,Clazz.declareInterface,Clazz.p0p,Clazz.pu$h,Clazz.newShortArray,Clazz.innerTypeInstance,Clazz.isClassDefined,Clazz.prepareCallback,Clazz.newArray,Clazz.castNullAs,Clazz.floatToShort,Clazz.superCall,Clazz.decorateAsType,Clazz.newBooleanArray,Clazz.newCharArray,Clazz.implementOf,Clazz.newDoubleArray,Clazz.overrideConstructor,
Clazz.clone,Clazz.doubleToShort,Clazz.getInheritedLevel,Clazz.getParamsType,Clazz.isAF,Clazz.isAI,Clazz.isAS,Clazz.isASS,Clazz.isAP,Clazz.isAFloat,Clazz.isAII,Clazz.isAFF,Clazz.isAFFF,Clazz.tryToSearchAndExecute,Clazz.getStackTrace,Clazz.inheritArgs,Clazz.alert,Clazz.defineMethod,Clazz.overrideMethod,Clazz.declareAnonymous,Clazz.cloneFinals);
